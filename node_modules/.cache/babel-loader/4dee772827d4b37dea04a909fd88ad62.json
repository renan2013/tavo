{"remainingRequest":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\store\\auth\\moduleAuthActions.js","dependencies":[{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\store\\auth\\moduleAuthActions.js","mtime":1604601625192},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js","mtime":1604601556483}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Renan Galvan\\\\Desktop\\\\sincronizados_git\\\\tavo_nov_2020\\\\tavo\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n\n/*=========================================================================================\r\n File Name: moduleAuthActions.js\r\n Description: Auth Module Actions\r\n==========================================================================================*/\nimport axios from 'axios';\nimport Vue from \"vue\";\nexport default {\n  /// llama a Solicitud de Datos \n  acLoginDsoa: function () {\n    var _acLoginDsoa = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref, pet) {\n      var dispatch, commit, state, datos, url, dsoaModel, res;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch = _ref.dispatch, commit = _ref.commit, state = _ref.state;\n              datos = state.peticion;\n              url = state.urlDsoa;\n              state.errorProfile = \"0\";\n              if (datos == null || datos == \"\") alert(\"Peticion va Nula\");\n              dsoaModel = {\n                datos: datos,\n                manipula: \"\",\n                bd: \"\",\n                dml: pet.dml,\n                formato: pet.formatoenvio,\n                formatoRequest: pet.formatorecibe,\n                credencial: pet.credencial,\n                tecnologia: \"\",\n                datosJson: \"\",\n                objectId: pet.ObjectId\n              }; //console.log('DSOAMODEL2: ' + JSON.stringify(dsoaModel));\n              // LIMPIO EL TOKEN \n\n              commit('MUTSETCLEARTOKEN');\n              _context.prev = 7;\n              _context.next = 10;\n              return axios({\n                method: 'POST',\n                url: url,\n                headers: {\n                  \"content-type\": \"application/json\"\n                },\n                \"processData\": false,\n                \"contentType\": false,\n                \"mimeType\": \"multipart/form-data\",\n                \"sync\": false,\n                \"crossDomain\": true,\n                \"data\": dsoaModel\n              }).then(function (response) {\n                var tipoLogin = pet.tipoLogin; // console.log(\"RESPONSE\", JSON.stringify(response.data) + \"    \" + tipoLogin);\n\n                if (tipoLogin == \"L\") //ñpgom \n                  {\n                    var pista = \"\";\n                    commit('MUTSETRESPUESTALOGIN', response.data);\n\n                    try {\n                      pista = \"DOMPARSERS \";\n                      var parser = new DOMParser();\n                      var error = parser.parseFromString(response.data.datos, \"text/xml\").getElementsByTagName(\"PV_ERROR\")[0].childNodes[0].nodeValue;\n\n                      if (error == 0) {\n                        //extrae datos XMLRESPONSE\n                        var strData64 = response.data.datos.replace(\"<Response><XML_RESPONSE><![CDATA[<Sdt_profile>\", \"\");\n                        var posicion = strData64.indexOf(\"</Sdt_profile>\");\n                        strData64 = strData64.substring(0, posicion);\n                        var strData = JSON.parse(atob(strData64));\n\n                        try {\n                          state.profile[0] = strData.Sdt_profile;\n\n                          if (state.profile[0].Credencial == \"\" || state.profile[0].Credencial == null) {\n                            state.profile[0].Credendial = response.data.credencial;\n                          }\n\n                          var credencialFinal = state.profile[0].Credencial > \"\" ? state.profile[0].Credencial : response.data.credencial; //llama conectar  el Chat \n\n                          var peticion = {\n                            password: strData.Sdt_profile.Username,\n                            username: strData.Sdt_profile.Username,\n                            Credencial: strData.Sdt_profile.Credencial,\n                            NumUsuario: strData.Sdt_profile.num_user,\n                            NumEmpresa: strData.Sdt_profile.Empresa,\n                            frase: \"frase que lo identifica2\",\n                            photoURL: strData.Sdt_profile.Avatar,\n                            displayName: strData.Sdt_profile.Nombre\n                          };\n                          pista = \"PASO5 \";\n                          dispatch('acLoginChat', peticion);\n                        } catch (e) {\n                          console.log(\"error\", e);\n                        }\n                      } else state.errorProfile = error;\n                    } catch (error) {\n                      console.log(\"Error CONECTANDO CHAT \", error + pista);\n                    } //\n\n                  }\n\n                if (tipoLogin == \"U\") commit('MUTSETRESPUESTALOGINU', response.data); //  REGISTRO Y RECUPERAR    \n\n                if (tipoLogin == \"R\" || tipoLogin == \"I\") {\n                  commit('MUTSETRESPUESTALOGINR', response.data);\n                } //CAMBIAR CLAVE\n\n\n                if (tipoLogin == \"C\") commit('MUTSETRESPUESTACAMBIO', response.data);\n                /**\r\n                     LN_WKLOGIN            NUMBER := 1;  -- LOGIN   VAL_OBJ_LOGIN.PC_ACTION = 'L'\r\n                         THEN\r\n                       \r\n                      LN_WKCPASRECUPERA             NUMBER := 2;  -- CAMBIA EL PASSWORD POR RECUPERACON   = 'R'    \r\n                        \r\n                      LN_WKLOGOUT           NUMBER := 3;  -- QUITA EL LOGIN  LIMPIA SESIONES  \r\n                      \r\n                      LN_WKCPAS             NUMBER := 4;  -- CAMBIA EL PASSWORD\r\n                      -- Despues de que pide   recuperar clave\r\n                      LN_WKFLOGIN           NUMBER := 5; --  =F\r\n                      -- verifica si el pass es el del mismo o exite solo para autorizaciones\r\n                      LN_WKVERICACLAVEYUSUARIO           NUMBER := 6;  V\r\n                      \r\n                      LN_RECUPERA_CLAVE NUMBER:=7; -- PARA REUPERAR CLAVE  R\r\n                      \r\n                      LN_WKREGISTRO      NUMBER := 8;  -- REGISTRO   I\r\n                      \r\n                      LN_WKVERIFICASUARIO      NUMBER := 9;  -- VERIFICA SOLO USUARIO   Y DEVUELVE DATOS BASICOS \r\n                      \r\n                 * / */\n              }).catch(function (error) {\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"SE PRODUJO ERROR \" + error);\n                }\n              });\n\n            case 10:\n              res = _context.sent;\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](7);\n              alert(_context.t0); // catches both errors\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 13]]);\n    }));\n\n    function acLoginDsoa(_x, _x2) {\n      return _acLoginDsoa.apply(this, arguments);\n    }\n\n    return acLoginDsoa;\n  }(),\n  /// RECUPERA LA IP PUBLICA\n  acLoginGetip: function () {\n    var _acLoginGetip = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref2) {\n      var commit, state, url, res;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref2.commit, state = _ref2.state;\n              url = \"https://api.ipify.org?format=json\";\n              _context2.prev = 2;\n              _context2.next = 5;\n              return axios({\n                method: 'GET',\n                url: url,\n                headers: {\n                  \"content-type\": \"application/json\"\n                }\n              }).then(function (response) {\n                commit('MUTSETPUBLICIP', response.data.ip); //commit('MUTSETRESPUESTALOGIN', response.data);\n              }).catch(function (error) {\n                console.log(\"ERROR3 IP ERROR\", error);\n\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"SE PRODUJO ERROR \" + error);\n                }\n              });\n\n            case 5:\n              res = _context2.sent;\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](2);\n              alert(_context2.t0); // catches both errors\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 8]]);\n    }));\n\n    function acLoginGetip(_x3) {\n      return _acLoginGetip.apply(this, arguments);\n    }\n\n    return acLoginGetip;\n  }(),\n  /// llama a Solicitud de Datos \n  acLoginEncripta: function () {\n    var _acLoginEncripta = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref3, textoEncriptar) {\n      var dispatch, commit, state, url, res;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              dispatch = _ref3.dispatch, commit = _ref3.commit, state = _ref3.state;\n              url = state.urlEncripta; //alert(url);\n\n              _context3.next = 4;\n              return axios({\n                method: 'POST',\n                url: url,\n                headers: {\n                  \"content-type\": \"text/plain\"\n                },\n                \"processData\": false,\n                \"contentType\": false,\n                \"mimeType\": \"multipart/form-data\",\n                \"sync\": false,\n                \"crossDomain\": true,\n                \"data\": textoEncriptar\n              }).then(function (response) {\n                commit('MUTSETENCRIPTA', response.data);\n              }).catch(function (error) {\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"SE PRODUJO ERROR \" + error);\n                }\n              });\n\n            case 4:\n              res = _context3.sent;\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    function acLoginEncripta(_x4, _x5) {\n      return _acLoginEncripta.apply(this, arguments);\n    }\n\n    return acLoginEncripta;\n  }(),\n  ////////////////////////////////////////////////// CHAT CHAT CHAT CHAT CHAT \n  logout: function () {\n    var _logout = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(_ref4) {\n      var commit;\n      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              commit = _ref4.commit;\n              _context4.next = 3;\n              return commit('dsoaLogin/logout', null, {\n                root: true\n              });\n\n            case 3:\n              _context4.next = 5;\n              return Vue.prototype.$rootBus.$emit(\"routerPush\", {\n                name: \"Login\",\n                params: {}\n              });\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    function logout(_x6) {\n      return _logout.apply(this, arguments);\n    }\n\n    return logout;\n  }(),\n  ////   LOGIN CHAT LOGIN CHAT  LOGIN CHAT LOGIN CHAT LOGIN CHAT \n  acLoginChat: function () {\n    var _acLoginChat = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(_ref5, pet) {\n      var dispatch, commit, state, pista, url, res;\n      return regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              dispatch = _ref5.dispatch, commit = _ref5.commit, state = _ref5.state;\n              ///loginDsoa\n              pista = \"inicio\";\n              commit('MUTSETCLEARTOKEN');\n              url = state.urlApiChat + \"/loginDsoa\";\n              pista = url; //alert(\"CONECTANDO AL CHAT\" + pista);\n              //alert(url)\n\n              _context5.prev = 5;\n              _context5.next = 8;\n              return axios({\n                method: 'POST',\n                url: url,\n                headers: {\n                  \"content-type\": \"application/json\"\n                },\n                \"processData\": false,\n                \"contentType\": false,\n                \"mimeType\": \"multipart/form-data\",\n                \"sync\": false,\n                \"crossDomain\": true,\n                \"data\": pet\n              }).then(function (response) {\n                pista = \"respondio \";\n                console.log(\"Respuesta LOGIN CHAT\", JSON.stringify(response.data.token));\n                pista = \"MUTSETUSER Asignando token\";\n                commit('MUTSETUSER', response.data.token); // lo guarda en la bodega de Tokens\n\n                commit('MUTSETRESPUESTALOGINCHAT', response.data.token);\n              }).catch(function (error) {\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"SE PRODUJO ERROR \" + error + \"   \" + pista);\n                }\n              });\n\n            case 8:\n              res = _context5.sent;\n              _context5.next = 14;\n              break;\n\n            case 11:\n              _context5.prev = 11;\n              _context5.t0 = _context5[\"catch\"](5);\n              console.log(\"ERROR2\", _context5.t0);\n\n            case 14:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[5, 11]]);\n    }));\n\n    function acLoginChat(_x7, _x8) {\n      return _acLoginChat.apply(this, arguments);\n    }\n\n    return acLoginChat;\n  }()\n};",{"version":3,"sources":["C:/Users/Renan Galvan/Desktop/sincronizados_git/tavo_nov_2020/tavo/src/store/auth/moduleAuthActions.js"],"names":["axios","Vue","acLoginDsoa","pet","dispatch","commit","state","datos","peticion","url","urlDsoa","errorProfile","alert","dsoaModel","manipula","bd","dml","formato","formatoenvio","formatoRequest","formatorecibe","credencial","tecnologia","datosJson","objectId","ObjectId","method","headers","then","response","tipoLogin","pista","data","parser","DOMParser","error","parseFromString","getElementsByTagName","childNodes","nodeValue","strData64","replace","posicion","indexOf","substring","strData","JSON","parse","atob","profile","Sdt_profile","Credencial","Credendial","credencialFinal","password","Username","username","NumUsuario","num_user","NumEmpresa","Empresa","frase","photoURL","Avatar","displayName","Nombre","e","console","log","catch","status","request","res","acLoginGetip","ip","acLoginEncripta","textoEncriptar","urlEncripta","logout","root","prototype","$rootBus","$emit","name","params","acLoginChat","urlApiChat","stringify","token"],"mappings":"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","sourcesContent":["/*=========================================================================================\r\n File Name: moduleAuthActions.js\r\n Description: Auth Module Actions\r\n==========================================================================================*/\r\nimport axios from 'axios';\r\nimport Vue from \"vue\";\r\nexport default {\r\n\r\n\r\n    /// llama a Solicitud de Datos \r\n    async acLoginDsoa({ dispatch, commit, state }, pet) {\r\n\r\n        const datos = state.peticion;\r\n        const url = state.urlDsoa;\r\n\r\n        state.errorProfile = \"0\";\r\n\r\n        if (datos == null || datos == \"\")\r\n            alert(\"Peticion va Nula\");\r\n\r\n\r\n\r\n        var dsoaModel = {\r\n            datos: datos,\r\n            manipula: \"\",\r\n            bd: \"\",\r\n            dml: pet.dml,\r\n            formato: pet.formatoenvio,\r\n            formatoRequest: pet.formatorecibe,\r\n            credencial: pet.credencial,\r\n            tecnologia: \"\",\r\n            datosJson: \"\",\r\n            objectId: pet.ObjectId,\r\n        };\r\n\r\n        //console.log('DSOAMODEL2: ' + JSON.stringify(dsoaModel));\r\n\r\n        // LIMPIO EL TOKEN \r\n        commit('MUTSETCLEARTOKEN');\r\n\r\n        try {\r\n            // fetch data from a url web service\r\n            let res = await axios({\r\n                    method: 'POST',\r\n                    url,\r\n                    headers: { \"content-type\": \"application/json\", },\r\n                    \"processData\": false,\r\n                    \"contentType\": false,\r\n                    \"mimeType\": \"multipart/form-data\",\r\n                    \"sync\": false,\r\n                    \"crossDomain\": true,\r\n                    \"data\": dsoaModel\r\n                })\r\n                .then((response) => {\r\n\r\n                    let tipoLogin = pet.tipoLogin;\r\n\r\n                    // console.log(\"RESPONSE\", JSON.stringify(response.data) + \"    \" + tipoLogin);\r\n\r\n                    if (tipoLogin == \"L\") //ñpgom \r\n                    {\r\n                        let pista = \"\";\r\n                        commit('MUTSETRESPUESTALOGIN', response.data);\r\n                        try {\r\n\r\n                            pista = \"DOMPARSERS \"\r\n                            var parser = new DOMParser();\r\n                            var error = parser.parseFromString(response.data.datos, \"text/xml\").getElementsByTagName(\"PV_ERROR\")[0].childNodes[0].nodeValue;\r\n                            if (error == 0) {\r\n                                //extrae datos XMLRESPONSE\r\n                                var strData64 = response.data.datos.replace(\"<Response><XML_RESPONSE><![CDATA[<Sdt_profile>\", \"\");\r\n                                var posicion = strData64.indexOf(\"</Sdt_profile>\");\r\n                                strData64 = strData64.substring(0, posicion);\r\n                                var strData = JSON.parse(atob(strData64));\r\n                                try {\r\n                                    state.profile[0] = strData.Sdt_profile;\r\n                                    if (state.profile[0].Credencial == \"\" || state.profile[0].Credencial == null) {\r\n                                        state.profile[0].Credendial = response.data.credencial;\r\n                                    }\r\n                                    let credencialFinal = (state.profile[0].Credencial > \"\") ? state.profile[0].Credencial : response.data.credencial;\r\n\r\n                                    //llama conectar  el Chat \r\n\r\n                                    let peticion = {\r\n                                        password: strData.Sdt_profile.Username,\r\n                                        username: strData.Sdt_profile.Username,\r\n                                        Credencial: strData.Sdt_profile.Credencial,\r\n\r\n                                        NumUsuario: strData.Sdt_profile.num_user,\r\n\r\n                                        NumEmpresa: strData.Sdt_profile.Empresa,\r\n\r\n                                        frase: \"frase que lo identifica2\",\r\n                                        photoURL: strData.Sdt_profile.Avatar,\r\n                                        displayName: strData.Sdt_profile.Nombre\r\n                                    }\r\n                                    pista = \"PASO5 \"\r\n                                    dispatch('acLoginChat', peticion);\r\n\r\n\r\n\r\n                                } catch (e) {\r\n                                    console.log(\"error\", e);\r\n                                }\r\n                            } else\r\n                                state.errorProfile = error;\r\n\r\n                        } catch (error) {\r\n                            console.log(\"Error CONECTANDO CHAT \", error + pista)\r\n                        }\r\n\r\n                        //\r\n\r\n                    }\r\n\r\n\r\n                    if (tipoLogin == \"U\")\r\n                        commit('MUTSETRESPUESTALOGINU', response.data);\r\n\r\n                    //  REGISTRO Y RECUPERAR    \r\n                    if (tipoLogin == \"R\" || tipoLogin == \"I\") {\r\n\r\n                        commit('MUTSETRESPUESTALOGINR', response.data);\r\n                    }\r\n\r\n                    //CAMBIAR CLAVE\r\n                    if (tipoLogin == \"C\")\r\n                        commit('MUTSETRESPUESTACAMBIO', response.data);\r\n\r\n\r\n                    /**\r\n                         LN_WKLOGIN            NUMBER := 1;  -- LOGIN   VAL_OBJ_LOGIN.PC_ACTION = 'L'\r\n                             THEN\r\n                           \r\n                          LN_WKCPASRECUPERA             NUMBER := 2;  -- CAMBIA EL PASSWORD POR RECUPERACON   = 'R'    \r\n                            \r\n                          LN_WKLOGOUT           NUMBER := 3;  -- QUITA EL LOGIN  LIMPIA SESIONES  \r\n                          \r\n                          LN_WKCPAS             NUMBER := 4;  -- CAMBIA EL PASSWORD\r\n                          -- Despues de que pide   recuperar clave\r\n                          LN_WKFLOGIN           NUMBER := 5; --  =F\r\n                          -- verifica si el pass es el del mismo o exite solo para autorizaciones\r\n                          LN_WKVERICACLAVEYUSUARIO           NUMBER := 6;  V\r\n                          \r\n                          LN_RECUPERA_CLAVE NUMBER:=7; -- PARA REUPERAR CLAVE  R\r\n                          \r\n                          LN_WKREGISTRO      NUMBER := 8;  -- REGISTRO   I\r\n                          \r\n                          LN_WKVERIFICASUARIO      NUMBER := 9;  -- VERIFICA SOLO USUARIO   Y DEVUELVE DATOS BASICOS \r\n                          \r\n                     * / */\r\n\r\n                })\r\n                .catch(function(error) {\r\n                    if (error.response) {\r\n                        // Request made and server responded\r\n                        console.log(error.response.data);\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.headers);\r\n                    } else if (error.request) {\r\n                        // The request was made but no response was received\r\n                        console.log(error.request);\r\n                    } else {\r\n                        // Something happened in setting up the request that triggered an Error\r\n                        console.log(\"SE PRODUJO ERROR \" + error);\r\n                    }\r\n                });\r\n\r\n        } catch (error) {\r\n            alert(error); // catches both errors\r\n        }\r\n\r\n    },\r\n\r\n\r\n\r\n    /// RECUPERA LA IP PUBLICA\r\n    async acLoginGetip({ commit, state }) {\r\n        let url = \"https://api.ipify.org?format=json\";\r\n        try {\r\n            // fetch data from a url web service\r\n            let res = await axios({\r\n                    method: 'GET',\r\n                    url,\r\n                    headers: { \"content-type\": \"application/json\", }\r\n                })\r\n                .then((response) => {\r\n                    commit('MUTSETPUBLICIP', response.data.ip);\r\n                    //commit('MUTSETRESPUESTALOGIN', response.data);\r\n\r\n                })\r\n                .catch(function(error) {\r\n\r\n                    console.log(\"ERROR3 IP ERROR\", error);\r\n                    if (error.response) {\r\n                        // Request made and server responded\r\n                        console.log(error.response.data);\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.headers);\r\n                    } else if (error.request) {\r\n                        // The request was made but no response was received\r\n                        console.log(error.request);\r\n                    } else {\r\n                        // Something happened in setting up the request that triggered an Error\r\n                        console.log(\"SE PRODUJO ERROR \" + error);\r\n                    }\r\n                });\r\n\r\n        } catch (error) {\r\n            alert(error); // catches both errors\r\n        }\r\n\r\n    },\r\n\r\n    /// llama a Solicitud de Datos \r\n    async acLoginEncripta({ dispatch, commit, state }, textoEncriptar) {\r\n        let url = state.urlEncripta;\r\n\r\n        //alert(url);\r\n\r\n        {\r\n            // fetch data from a url web service\r\n            let res = await axios({\r\n                    method: 'POST',\r\n                    url,\r\n                    headers: { \"content-type\": \"text/plain\", },\r\n                    \"processData\": false,\r\n                    \"contentType\": false,\r\n                    \"mimeType\": \"multipart/form-data\",\r\n                    \"sync\": false,\r\n                    \"crossDomain\": true,\r\n                    \"data\": textoEncriptar\r\n                })\r\n                .then((response) => {\r\n\r\n                    commit('MUTSETENCRIPTA', response.data);\r\n\r\n                })\r\n                .catch(function(error) {\r\n                    if (error.response) {\r\n                        // Request made and server responded\r\n                        console.log(error.response.data);\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.headers);\r\n                    } else if (error.request) {\r\n                        // The request was made but no response was received\r\n                        console.log(error.request);\r\n                    } else {\r\n                        // Something happened in setting up the request that triggered an Error\r\n                        console.log(\"SE PRODUJO ERROR \" + error);\r\n                    }\r\n                });\r\n\r\n        }\r\n\r\n\r\n    },\r\n\r\n    ////////////////////////////////////////////////// CHAT CHAT CHAT CHAT CHAT \r\n\r\n    logout: async({ commit }) => {\r\n        await commit('dsoaLogin/logout', null, { root: true });\r\n        await Vue.prototype.$rootBus.$emit(\"routerPush\", { name: \"Login\", params: {} });\r\n    },\r\n\r\n\r\n    ////   LOGIN CHAT LOGIN CHAT  LOGIN CHAT LOGIN CHAT LOGIN CHAT \r\n\r\n    async acLoginChat({ dispatch, commit, state }, pet) {\r\n        ///loginDsoa\r\n\r\n        let pista = \"inicio\";\r\n\r\n\r\n\r\n        commit('MUTSETCLEARTOKEN');\r\n\r\n        const url = state.urlApiChat + \"/loginDsoa\";\r\n\r\n        pista = url;\r\n\r\n        //alert(\"CONECTANDO AL CHAT\" + pista);\r\n\r\n        //alert(url)\r\n        try {\r\n            // fetch data from a url web service\r\n            let res = await axios({\r\n                    method: 'POST',\r\n                    url,\r\n                    headers: { \"content-type\": \"application/json\", },\r\n                    \"processData\": false,\r\n                    \"contentType\": false,\r\n                    \"mimeType\": \"multipart/form-data\",\r\n                    \"sync\": false,\r\n                    \"crossDomain\": true,\r\n                    \"data\": pet\r\n                })\r\n                .then((response) => {\r\n                    pista = \"respondio \";\r\n\r\n                    console.log(\"Respuesta LOGIN CHAT\", JSON.stringify(response.data.token))\r\n\r\n                    pista = \"MUTSETUSER Asignando token\";\r\n                    commit('MUTSETUSER', response.data.token);\r\n\r\n                    // lo guarda en la bodega de Tokens\r\n                    commit('MUTSETRESPUESTALOGINCHAT', response.data.token);\r\n\r\n                })\r\n                .catch(function(error) {\r\n                    if (error.response) {\r\n                        // Request made and server responded\r\n                        console.log(error.response.data);\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.headers);\r\n                    } else if (error.request) {\r\n                        // The request was made but no response was received\r\n                        console.log(error.request);\r\n                    } else {\r\n                        // Something happened in setting up the request that triggered an Error\r\n                        console.log(\"SE PRODUJO ERROR \" + error + \"   \" + pista);\r\n                    }\r\n                });\r\n\r\n        } catch (error) {\r\n            console.log(\"ERROR2\", error);\r\n        }\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n}"]}]}