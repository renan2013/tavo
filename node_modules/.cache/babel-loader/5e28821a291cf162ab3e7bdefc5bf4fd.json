{"remainingRequest":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\store\\chat\\moduleChatActions.js","dependencies":[{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\store\\chat\\moduleChatActions.js","mtime":1604601625210},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js","mtime":1604601556483}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Renan Galvan\\\\Desktop\\\\sincronizados_git\\\\tavo_nov_2020\\\\tavo\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n\n/*=========================================================================================\r\n  File Name: moduleChatActions.js\r\n  Description: Chat Module Actions\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n==========================================================================================*/\nimport Vue from \"vue\";\nimport axios from 'axios';\nimport router from '@/router';\nexport default {\n  setChatSearchQuery: function setChatSearchQuery(_ref, query) {\n    var commit = _ref.commit;\n    commit('SET_CHAT_SEARCH_QUERY', query);\n  },\n  updateAboutChat: function updateAboutChat(_ref2, value) {\n    var commit = _ref2.commit,\n        rootState = _ref2.rootState;\n    commit('UPDATE_ABOUT_CHAT', {\n      rootState: rootState,\n      value: value\n    });\n  },\n  updateStatusChat: function updateStatusChat(_ref3, value) {\n    var commit = _ref3.commit,\n        rootState = _ref3.rootState;\n    commit('UPDATE_STATUS_CHAT', {\n      rootState: rootState,\n      value: value\n    });\n  },\n  SENDCHATMESSAGE: function SENDCHATMESSAGE(_ref4, payload) {\n    var getters = _ref4.getters,\n        commit = _ref4.commit;\n    payload.chatData = getters.chatDataOfUser(payload.id);\n    payload.origen = 1;\n    commit('SEND_CHAT_MESSAGE', payload);\n  },\n  // API CALLS \n  SOCKET_ACTION_SEND_CHAT_MESSAGE: function SOCKET_ACTION_SEND_CHAT_MESSAGE(_ref5, payload) {\n    var commit = _ref5.commit;\n    //console.log(\"action SOCKET MMMMMMMMMMMMMMMENNNNNNNNNNNNNNNNNNNSAJE \", JSON.stringify(payload))\n    payload.origen = 0;\n    var message = payload.data;\n    commit('SOCKET_MUTATION_PRIVATE_MESSAGE', payload);\n\n    if (router.currentRoute.path !== \"/apps/chat\" && router.currentRoute.path !== \"/apps/chat/0\" && router.currentRoute.path !== \"/apps/chat/118\") {\n      var modal = '<template> <div class=\"demo-alignment\"><vs-button @click=\"activePrompt = true\" color=\"primary\" type=\"border\">Run prompt</vs-button>' + '</div> </template>';\n      Vue.component('modal', {\n        modal: modal\n      }); //alert(\"SEND_CHAT_MESSAGE\")\n      //router.push('/divisoft/notificaChat').catch(() => {});\n    }\n  },\n  SOCKET_ACTION_SEND_NOTIFICACION: function SOCKET_ACTION_SEND_NOTIFICACION(_ref6, payload) {\n    var commit = _ref6.commit;\n    console.log(\"Noticiacion Recibida\", JSON.stringify(payload));\n  },\n  fetchContacts: function () {\n    var _fetchContacts = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref7, pet) {\n      var commit, state, url, res;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref7.commit, state = _ref7.state;\n              ///loginDsoa\n              //const url = process.env.VUE_APP_API_URL + \"/getContacts\";\n              url = process.env.VUE_APP_API_URL + \"/getContacts\"; //console.log(\"petfetchContacts\", pet)\n\n              _context.prev = 2;\n              _context.next = 5;\n              return axios({\n                method: 'POST',\n                url: url,\n                headers: {\n                  \"content-type\": \"application/json\"\n                },\n                \"processData\": false,\n                \"contentType\": false,\n                \"mimeType\": \"multipart/form-data\",\n                \"sync\": false,\n                \"crossDomain\": true,\n                \"data\": pet\n              }).then(function (response) {\n                //console.log(\"Respuesta \", JSON.stringify(response.data));\n                commit('UPDATE_CONTACTS', response.data);\n              }).catch(function (error) {\n                alert(\"error AA\" + error);\n\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"SE PRODUJO ERROR AA \" + error);\n                }\n              });\n\n            case 5:\n              res = _context.sent;\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](2);\n              alert(_context.t0); // catches both errors\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 8]]);\n    }));\n\n    function fetchContacts(_x, _x2) {\n      return _fetchContacts.apply(this, arguments);\n    }\n\n    return fetchContacts;\n  }(),\n  // Get chat-contacts from server. Also change in store\n  fetchChatContacts: function () {\n    var _fetchChatContacts = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref8, pet) {\n      var commit, state, url, res;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref8.commit, state = _ref8.state;\n              ///loginDsoa\n              url = process.env.VUE_APP_API_URL + \"/getContactChats\";\n              _context2.prev = 2;\n              _context2.next = 5;\n              return axios({\n                method: 'POST',\n                url: url,\n                headers: {\n                  \"content-type\": \"application/json\"\n                },\n                \"processData\": false,\n                \"contentType\": false,\n                \"mimeType\": \"multipart/form-data\",\n                \"sync\": false,\n                \"crossDomain\": true,\n                \"data\": pet\n              }).then(function (response) {\n                commit('UPDATE_CHAT_CONTACTS', response.data);\n              }).catch(function (error) {\n                alert(\"error\" + error);\n\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"SE PRODUJO ERROR \" + error);\n                }\n              });\n\n            case 5:\n              res = _context2.sent;\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](2);\n              alert(_context2.t0); // catches both errors\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 8]]);\n    }));\n\n    function fetchChatContacts(_x3, _x4) {\n      return _fetchChatContacts.apply(this, arguments);\n    }\n\n    return fetchChatContacts;\n  }(),\n  // Get chats from server. Also change in store\n  fetchChats: function () {\n    var _fetchChats = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref9, pet) {\n      var commit, state, url, res;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              commit = _ref9.commit, state = _ref9.state;\n              ///loginDsoa\n              // alert(\"buscando chat\");\n              url = process.env.VUE_APP_API_URL + \"/getChats\"; // alert(url)\n\n              _context3.prev = 2;\n              _context3.next = 5;\n              return axios({\n                method: 'POST',\n                url: url,\n                headers: {\n                  \"content-type\": \"application/json\"\n                },\n                \"processData\": false,\n                \"contentType\": false,\n                \"mimeType\": \"multipart/form-data\",\n                \"sync\": false,\n                \"crossDomain\": true,\n                \"data\": pet\n              }).then(function (response) {\n                //alert(\"respondiendo etchChats C\");\n                //console.log(\"Respuesta \", JSON.stringify(response.data));\n                commit('UPDATE_CHATS', response.data);\n              }).catch(function (error) {\n                alert(\"error\" + error);\n\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"SE PRODUJO ERROR \" + error);\n                }\n              });\n\n            case 5:\n              res = _context3.sent;\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](2);\n              alert(_context3.t0); // catches both errors\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[2, 8]]);\n    }));\n\n    function fetchChats(_x5, _x6) {\n      return _fetchChats.apply(this, arguments);\n    }\n\n    return fetchChats;\n  }(),\n  markSeenAllMessages: function markSeenAllMessages(_ref10, id) {\n    var getters = _ref10.getters,\n        commit = _ref10.commit;\n    console.log('markSeenAllMessages buscando get chats 22', id);\n    return [];\n    return new Promise(function (resolve, reject) {\n      axios.post('/api/apps/chat/mark-all-seen', {\n        id: id\n      }).then(function (response) {\n        commit('MARK_SEEN_ALL_MESSAGES', {\n          id: id,\n          chatData: getters.chatDataOfUser(id)\n        });\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  toggleIsPinned: function toggleIsPinned(_ref11, payload) {\n    var commit = _ref11.commit;\n    //alert('buscando33 chats');\n    return new Promise(function (resolve, reject) {\n      axios.post('/api/apps/chat/set-pinned/', {\n        contactId: payload.id,\n        value: payload.value\n      }).then(function (response) {\n        commit('TOGGLE_IS_PINNED', payload);\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  }\n};",{"version":3,"sources":["C:/Users/Renan Galvan/Desktop/sincronizados_git/tavo_nov_2020/tavo/src/store/chat/moduleChatActions.js"],"names":["Vue","axios","router","setChatSearchQuery","query","commit","updateAboutChat","value","rootState","updateStatusChat","SENDCHATMESSAGE","payload","getters","chatData","chatDataOfUser","id","origen","SOCKET_ACTION_SEND_CHAT_MESSAGE","message","data","currentRoute","path","modal","component","SOCKET_ACTION_SEND_NOTIFICACION","console","log","JSON","stringify","fetchContacts","pet","state","url","process","env","VUE_APP_API_URL","method","headers","then","response","catch","error","alert","status","request","res","fetchChatContacts","fetchChats","markSeenAllMessages","Promise","resolve","reject","post","toggleIsPinned","contactId"],"mappings":"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","sourcesContent":["/*=========================================================================================\r\n  File Name: moduleChatActions.js\r\n  Description: Chat Module Actions\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n==========================================================================================*/\r\n\r\nimport Vue from \"vue\";\r\nimport axios from 'axios';\r\nimport router from '@/router';\r\n\r\nexport default {\r\n    setChatSearchQuery({ commit }, query) {\r\n        commit('SET_CHAT_SEARCH_QUERY', query);\r\n    },\r\n    updateAboutChat({ commit, rootState }, value) {\r\n        commit('UPDATE_ABOUT_CHAT', {\r\n            rootState,\r\n            value\r\n        });\r\n    },\r\n    updateStatusChat({ commit, rootState }, value) {\r\n        commit('UPDATE_STATUS_CHAT', {\r\n            rootState,\r\n            value\r\n        });\r\n    },\r\n\r\n    SENDCHATMESSAGE({ getters, commit }, payload) {\r\n\r\n        payload.chatData = getters.chatDataOfUser(payload.id)\r\n        payload.origen = 1;\r\n        commit('SEND_CHAT_MESSAGE', payload)\r\n    },\r\n\r\n\r\n    // API CALLS \r\n    SOCKET_ACTION_SEND_CHAT_MESSAGE({ commit }, payload) {\r\n\r\n        //console.log(\"action SOCKET MMMMMMMMMMMMMMMENNNNNNNNNNNNNNNNNNNSAJE \", JSON.stringify(payload))\r\n        payload.origen = 0;\r\n        let message = payload.data;\r\n        commit('SOCKET_MUTATION_PRIVATE_MESSAGE', payload)\r\n\r\n\r\n        if (router.currentRoute.path !== \"/apps/chat\" && router.currentRoute.path !== \"/apps/chat/0\" && router.currentRoute.path !== \"/apps/chat/118\") {\r\n\r\n            let modal = '<template> <div class=\"demo-alignment\"><vs-button @click=\"activePrompt = true\" color=\"primary\" type=\"border\">Run prompt</vs-button>' +\r\n                '</div> </template>';\r\n\r\n            Vue.component('modal', {\r\n                modal\r\n\r\n            })\r\n\r\n            //alert(\"SEND_CHAT_MESSAGE\")\r\n            //router.push('/divisoft/notificaChat').catch(() => {});\r\n        }\r\n\r\n\r\n    },\r\n\r\n    SOCKET_ACTION_SEND_NOTIFICACION({ commit }, payload) {\r\n        console.log(\"Noticiacion Recibida\", JSON.stringify(payload));\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n    async fetchContacts({ commit, state }, pet) {\r\n        ///loginDsoa\r\n        //const url = process.env.VUE_APP_API_URL + \"/getContacts\";\r\n        const url = process.env.VUE_APP_API_URL + \"/getContacts\";\r\n\r\n        //console.log(\"petfetchContacts\", pet)\r\n\r\n\r\n        try {\r\n            // fetch data from a url web service\r\n\r\n            let res = await axios({\r\n                    method: 'POST',\r\n                    url,\r\n                    headers: { \"content-type\": \"application/json\", },\r\n                    \"processData\": false,\r\n                    \"contentType\": false,\r\n                    \"mimeType\": \"multipart/form-data\",\r\n                    \"sync\": false,\r\n                    \"crossDomain\": true,\r\n                    \"data\": pet\r\n                }).then((response) => {\r\n                    //console.log(\"Respuesta \", JSON.stringify(response.data));\r\n                    commit('UPDATE_CONTACTS', response.data);\r\n\r\n                })\r\n                .catch(function(error) {\r\n                    alert(\"error AA\" + error);\r\n                    if (error.response) {\r\n                        // Request made and server responded\r\n                        console.log(error.response.data);\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.headers);\r\n                    } else if (error.request) {\r\n                        // The request was made but no response was received\r\n                        console.log(error.request);\r\n                    } else {\r\n                        // Something happened in setting up the request that triggered an Error\r\n                        console.log(\"SE PRODUJO ERROR AA \" + error);\r\n                    }\r\n                });\r\n\r\n        } catch (error) {\r\n            alert(error); // catches both errors\r\n        }\r\n    },\r\n\r\n    // Get chat-contacts from server. Also change in store\r\n    async fetchChatContacts({ commit, state }, pet) {\r\n\r\n        ///loginDsoa\r\n\r\n        const url = process.env.VUE_APP_API_URL + \"/getContactChats\";\r\n\r\n        try {\r\n            // fetch data from a url web service\r\n            let res = await axios({\r\n                    method: 'POST',\r\n                    url,\r\n                    headers: { \"content-type\": \"application/json\", },\r\n                    \"processData\": false,\r\n                    \"contentType\": false,\r\n                    \"mimeType\": \"multipart/form-data\",\r\n                    \"sync\": false,\r\n                    \"crossDomain\": true,\r\n                    \"data\": pet\r\n                })\r\n                .then((response) => {\r\n\r\n                    commit('UPDATE_CHAT_CONTACTS', response.data);\r\n\r\n                })\r\n                .catch(function(error) {\r\n                    alert(\"error\" + error);\r\n                    if (error.response) {\r\n                        // Request made and server responded\r\n                        console.log(error.response.data);\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.headers);\r\n                    } else if (error.request) {\r\n                        // The request was made but no response was received\r\n                        console.log(error.request);\r\n                    } else {\r\n                        // Something happened in setting up the request that triggered an Error\r\n                        console.log(\"SE PRODUJO ERROR \" + error);\r\n                    }\r\n                });\r\n\r\n        } catch (error) {\r\n            alert(error); // catches both errors\r\n        }\r\n    },\r\n\r\n\r\n\r\n    // Get chats from server. Also change in store\r\n\r\n    async fetchChats({ commit, state }, pet) {\r\n\r\n        ///loginDsoa\r\n        // alert(\"buscando chat\");\r\n\r\n        const url = process.env.VUE_APP_API_URL + \"/getChats\";\r\n        // alert(url)\r\n        try {\r\n            // fetch data from a url web service\r\n            let res = await axios({\r\n                    method: 'POST',\r\n                    url,\r\n                    headers: { \"content-type\": \"application/json\", },\r\n                    \"processData\": false,\r\n                    \"contentType\": false,\r\n                    \"mimeType\": \"multipart/form-data\",\r\n                    \"sync\": false,\r\n                    \"crossDomain\": true,\r\n                    \"data\": pet\r\n                })\r\n                .then((response) => {\r\n                    //alert(\"respondiendo etchChats C\");\r\n\r\n                    //console.log(\"Respuesta \", JSON.stringify(response.data));\r\n                    commit('UPDATE_CHATS', response.data)\r\n\r\n                })\r\n                .catch(function(error) {\r\n                    alert(\"error\" + error);\r\n                    if (error.response) {\r\n                        // Request made and server responded\r\n                        console.log(error.response.data);\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.headers);\r\n                    } else if (error.request) {\r\n                        // The request was made but no response was received\r\n                        console.log(error.request);\r\n                    } else {\r\n                        // Something happened in setting up the request that triggered an Error\r\n                        console.log(\"SE PRODUJO ERROR \" + error);\r\n                    }\r\n                });\r\n\r\n        } catch (error) {\r\n            alert(error); // catches both errors\r\n        }\r\n\r\n    },\r\n\r\n\r\n    markSeenAllMessages({ getters, commit }, id) {\r\n        console.log('markSeenAllMessages buscando get chats 22', id);\r\n\r\n        return [];\r\n\r\n        return new Promise((resolve, reject) => {\r\n            axios\r\n                .post('/api/apps/chat/mark-all-seen', { id })\r\n                .then((response) => {\r\n                    commit('MARK_SEEN_ALL_MESSAGES', {\r\n                        id,\r\n                        chatData: getters.chatDataOfUser(id)\r\n                    });\r\n                    resolve(response);\r\n                })\r\n                .catch((error) => {\r\n                    reject(error);\r\n                });\r\n        });\r\n    },\r\n\r\n    toggleIsPinned({ commit }, payload) {\r\n        //alert('buscando33 chats');\r\n        return new Promise((resolve, reject) => {\r\n            axios\r\n                .post('/api/apps/chat/set-pinned/', {\r\n                    contactId: payload.id,\r\n                    value: payload.value\r\n                })\r\n                .then((response) => {\r\n                    commit('TOGGLE_IS_PINNED', payload);\r\n                    resolve(response);\r\n                })\r\n                .catch((error) => {\r\n                    reject(error);\r\n                });\r\n        });\r\n    },\r\n\r\n\r\n\r\n\r\n};"]}]}