{"remainingRequest":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\divisoft\\uploadFile\\UploadDefault.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\divisoft\\uploadFile\\UploadDefault.vue","mtime":1604601624766},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js","mtime":1604601556483},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\vue-loader\\lib\\index.js","mtime":1604601615297}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// lector basico de documentos o imagenes\nimport { eventBus } from \"@/main\"; // para que se hablen los componentes\n\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\"; //componente lee B64\n\nimport file64Reader from \"./file64Reader\";\nimport * as divilib from \"@/divisoftlibs/utilDivisoftJS.js\";\nexport default {\n  created: function created() {\n    var _this = this;\n\n    //\t cuando se createReadStream\n    eventBus.$on(\"cargaDocUpload\", function (respuestaCMSUP) {\n      _this.Referencia = \"0\", //respuestaCMSUP[0].Referencia;\n      _this.LlaveExterna = respuestaCMSUP[0].LlaveExterna;\n      _this.NumNivel = respuestaCMSUP[0].NumNivel;\n      _this.NumDoc = respuestaCMSUP[0].NumDoc;\n      if (!(_this.LlaveExterna > \"0\")) _this.mensajeBd = \"Datos Incorrectos para Cargar IMAGEN\";\n      console.log(\"Cargando Uploda \", respuestaCMSUP);\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    //Crea un bus  OYENTE\n    // SI HAY PROMPT\n    eventBus.$off(\"cargaDocUpload\");\n  },\n  props: {\n    tituloUpload: {\n      type: String,\n      required: false\n    },\n    isSidebarActive: {\n      type: Boolean,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      mensajeBd: \"\",\n      activaalerta: true,\n      yasubio: false,\n      Referencia: \"0\",\n      LlaveExterna: \"\",\n      NumNivel: \"\",\n      NumDoc: \"\",\n      DocumentoMimeType: \"\",\n      DescripcionDoc: \"\",\n      bdCMS: divilib.BdCMS,\n      CMSpeticion: divilib.CMSpeticion,\n      ManipulacionCMS: divilib.ManipulacionCMS,\n      textBase64: \"\",\n      textMS: \"\",\n      imageType: 0,\n      subeArchivo: false,\n      editKey: 0\n    };\n  },\n  components: {\n    file64Reader: file64Reader,\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  computed: {\n    getCodCia: function getCodCia() {\n      return this.$store.state.CodCia;\n    },\n    getProfile: function getProfile() {\n      return this.$store.state.dsoaLogin.profile[0];\n    },\n    CMSDataRespuesta: function CMSDataRespuesta() {\n      return this.$store.state.DataCMS;\n    },\n    isSidebarActiveLocal: {\n      get: function get() {\n        return this.isSidebarActive;\n      },\n      set: function set(val) {\n        if (!val) {\n          this.$emit(\"closeSidebar\"); //this.initValues();\n        }\n      }\n    }\n  },\n  methods: {\n    //Metodo para recibir  Los datos del componente\n    EnviaBase64: function EnviaBase64(archivoBase64, datosRespuesta) {\n      this.textBase64 = \"\";\n      this.DocumentoMimeType = datosRespuesta[0].DocumentoMimeType;\n      this.DescripcionDoc = datosRespuesta[0].descripcionDoc;\n      if (this.DescripcionDoc == \"\") this.DescripcionDoc = \"Documento\";\n\n      if (datosRespuesta[0].DocumentoMimeType.indexOf(\"PDF\") > 0 || datosRespuesta[0].DocumentoMimeType.indexOf(\"pdf\") > 0) {\n        this.imageType = 1;\n        this.textBase64 = archivoBase64;\n      }\n\n      if (datosRespuesta[0].DocumentoMimeType.indexOf(\"mage\") > 0 || datosRespuesta[0].DocumentoMimeType.indexOf(\"MAGE\") > 0) {\n        this.imageType = 2;\n        this.textBase64 = archivoBase64;\n      }\n    },\n    uploadFile: function uploadFile() {\n      var extension = \"\";\n      this.yasubio = true;\n      extension = divilib.getValueExtension(divilib.CMSMimeToExtension, this.DocumentoMimeType); //alert(\"cocdia \"+this.getCodCia);\n\n      var respuestaCMS = {\n        CodCia: this.getCodCia,\n        CodigoPeticion: \"14\",\n        Repositorio: \"\",\n        GuardaArchivo: \"B\",\n        RutaOrigen: this.textBase64.substr(\",\"),\n        ExtensionFinal: \"\",\n        RutaDestino: \"\",\n        EntidadCodigo: \"\",\n        LlaveExterna: this.LlaveExterna,\n        NumNivel: this.NumNivel,\n        NumDoc: this.NumDoc,\n        ReferenciaPadre: \"\",\n        Referencia: this.Referencia,\n        hashDoc: \"\",\n        ReferenciaPersonalizada: \"\",\n        IndicadorAtiendeWs: \"\",\n        FormatoImagen: \"\",\n        DirectorioCrear: \"\",\n        DestinoFisico: \"\",\n        DirectorioSeparatorOrigen: \"\",\n        InsertarBd: \"\",\n        DocumentoMimeType: this.DocumentoMimeType,\n        NombreObjeto: this.descripcionDoc,\n        Descripcion: this.descripcionDoc,\n        Extension: extension,\n        NuevoNombre: this.descripcionDoc,\n        Thumb: \"\",\n        Lote: \"\",\n        FormatoArchivoDestino: \"\"\n      };\n      this.bdCMS[0].Encriptado = \"\";\n      this.bdCMS[0].TipoGuardado = \"\";\n      this.bdCMS[0].EntidadCodigo = \"\";\n      this.bdCMS[0].InformacionBusqueda = \"\";\n      this.bdCMS[0].TipoRespuesta = \"\";\n      this.bdCMS[0].DirectorioSeparadorOrigen = \"\";\n      this.bdCMS[0].GuardarImagenDestino = \"\";\n      this.bdCMS[0].Directorio = \"\";\n      this.bdCMS[0].IndMultipleEntidad = \"\";\n      this.bdCMS[0].Size = \"\"; //Peticion Minuscula\n\n      this.CMSpeticion[0].dml = \"\";\n      this.CMSpeticion[0].datos = divilib.dataCMSToXml(respuestaCMS);\n      this.CMSpeticion[0].manipula = divilib.manipulaCMSToXml(this.ManipulacionCMS[0]);\n      this.CMSpeticion[0].bd = divilib.bdCMSToXml(this.bdCMS[0]);\n      this.CMSpeticion[0].formato = \"N\";\n      this.CMSpeticion[0].formatoRequest = \"N\";\n      this.CMSpeticion[0].Credencial = this.getProfile.Credencial;\n      this.CMSpeticion[0].deserror = \"\";\n      this.CMSpeticion[0].codigoerror = \"0\";\n      console.log(\"peticion CMS \", this.CMSpeticion[0]); //cambia a acDsoaPrueba // acDsoa\n\n      if (this.LlaveExterna > \"0\") this.$store.dispatch(\"CMSacDsoa\", this.CMSpeticion[0]);else {\n        this.mensajeBd = \"No hay datos correctos para Guardar  llave extrerna no presente \";\n      }\n    }\n  },\n  watch: {\n    CMSDataRespuesta: function CMSDataRespuesta() {\n      console.log(\"respuesta CMSDataRespuesta Y se Cargo en watch CMSDataRespuesta \");\n\n      if (this.yasubio == true) {\n        this.Referencia = this.CMSDataRespuesta.Referencia;\n        if (this.Referencia > \"0\") this.mensajeBd = \"Documento Indexado correctamente con  Referencia\" + this.Referencia;else this.mensajeBd = \"Problemas para subir Archivo No Obtubo respuesta Correcta\";\n      }\n    }\n  }\n};",{"version":3,"sources":["UploadDefault.vue"],"names":[],"mappings":"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","sourcesContent":["  <!-- =========================================================================================\r\n  File Name: AddNewDataSidebar.vue\r\n  Description: Add New Data - Sidebar component\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuesax Admin - VueJS Dashboard Admin Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n========================================================================================== -->\r\n \r\n\r\n<template>\r\n  <div id=\"data-list-list-view\" class=\"vx-col md:w-1/2 w-full mb-base\">\r\n    <vs-sidebar\r\n      click-not-close\r\n      position-right\r\n      parent=\"body\"\r\n      default-index=\"1\"\r\n      color=\"primary\"\r\n      class=\"add-new-data-sidebar items-no-padding\"\r\n      spacer\r\n      v-model=\"isSidebarActiveLocal\"\r\n    >\r\n      <div class=\"mt-6 flex items-center justify-between px-6\">\r\n        <h4>{{tituloUpload}}</h4>\r\n        <feather-icon\r\n          icon=\"XIcon\"\r\n          @click.stop=\"isSidebarActiveLocal = false\"\r\n          class=\"cursor-pointer\"\r\n        ></feather-icon>\r\n      </div>\r\n\r\n      <vx-card title=\"Mensaje Base Datos\" code-toggler>{{mensajeBd}}</vx-card>\r\n\r\n      <vs-divider class=\"mb-0\"></vs-divider>\r\n      <VuePerfectScrollbar class=\"scroll-area--data-list-add-new pt-4 pb-6\">\r\n        <div class=\"p-6\">\r\n          <br />\r\n          <iframe v-show=\"imageType==1\" :src=\"textBase64\" type=\"application/pdf\"></iframe>\r\n          <div>\r\n            <img\r\n              v-show=\"imageType==2\"\r\n              style=\"display:block; width:100px;height:100px;\"\r\n              id=\"base64image\"\r\n              :src=\"textBase64\"\r\n            />\r\n          </div>\r\n\r\n          <file64Reader @EnviaBase64=\"EnviaBase64\"></file64Reader>\r\n<br>\r\n          <button type=\"submit\" class=\"btn btn-success\" @click=\"uploadFile()\">Subir a BD</button>\r\n        </div>\r\n      </VuePerfectScrollbar>\r\n    </vs-sidebar>\r\n  </div>\r\n</template> \r\n\r\n<script> \r\n// lector basico de documentos o imagenes\r\nimport { eventBus } from \"@/main\"; // para que se hablen los componentes\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\n\r\n//componente lee B64\r\nimport file64Reader from \"./file64Reader\";\r\n\r\nimport * as divilib from \"@/divisoftlibs/utilDivisoftJS.js\";\r\n\r\nexport default {\r\n  created() {\r\n    //\t cuando se createReadStream\r\n\r\n    eventBus.$on(\"cargaDocUpload\", respuestaCMSUP => { \r\n      (\r\n        \r\n        this.Referencia = \"0\"), //respuestaCMSUP[0].Referencia;\r\n        (this.LlaveExterna = respuestaCMSUP[0].LlaveExterna);\r\n      this.NumNivel = respuestaCMSUP[0].NumNivel;\r\n      this.NumDoc = respuestaCMSUP[0].NumDoc;\r\n      if    (!(this.LlaveExterna > \"0\"))\r\n           this.mensajeBd = \"Datos Incorrectos para Cargar IMAGEN\";\r\n          \r\n      console.log(\"Cargando Uploda \", respuestaCMSUP);\r\n    });\r\n  },\r\n  beforeDestroy: function() {\r\n    //Crea un bus  OYENTE\r\n    // SI HAY PROMPT\r\n    eventBus.$off(\"cargaDocUpload\");   \r\n  },\r\n\r\n  props: {\r\n    tituloUpload: {\r\n      type: String,\r\n      required: false\r\n    },\r\n    isSidebarActive: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      mensajeBd: \"\",\r\n      activaalerta: true,\r\n      yasubio: false,\r\n\r\n      Referencia: \"0\",\r\n      LlaveExterna: \"\",\r\n      NumNivel: \"\",\r\n      NumDoc: \"\",\r\n\r\n      DocumentoMimeType: \"\",\r\n      DescripcionDoc: \"\",\r\n\r\n      bdCMS: divilib.BdCMS,\r\n      CMSpeticion: divilib.CMSpeticion,\r\n      ManipulacionCMS: divilib.ManipulacionCMS,\r\n      textBase64: \"\",\r\n      textMS: \"\",\r\n      imageType: 0,\r\n      subeArchivo: false,\r\n      editKey: 0\r\n    };\r\n  },\r\n  components: {\r\n    file64Reader,\r\n    VuePerfectScrollbar\r\n  },\r\n  computed: {\r\n    getCodCia() {\r\n      return this.$store.state.CodCia;\r\n    },\r\n    getProfile() {\r\n          return this.$store.state.dsoaLogin.profile[0];\r\n    },\r\n\r\n    CMSDataRespuesta() {\r\n      return this.$store.state.DataCMS;\r\n    },\r\n\r\n    isSidebarActiveLocal: {\r\n      get() {\r\n        return this.isSidebarActive;\r\n      },\r\n      set(val) {\r\n        if (!val) {\r\n          this.$emit(\"closeSidebar\");\r\n          //this.initValues();\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //Metodo para recibir  Los datos del componente\r\n\r\n    EnviaBase64(archivoBase64, datosRespuesta) {\r\n      this.textBase64 = \"\";\r\n\r\n      this.DocumentoMimeType = datosRespuesta[0].DocumentoMimeType;\r\n      this.DescripcionDoc = datosRespuesta[0].descripcionDoc;\r\n      if (this.DescripcionDoc == \"\") this.DescripcionDoc = \"Documento\";\r\n\r\n      if (\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"PDF\") > 0 ||\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"pdf\") > 0\r\n      ) {\r\n        this.imageType = 1;\r\n        this.textBase64 = archivoBase64;\r\n      }\r\n\r\n      if (\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"mage\") > 0 ||\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"MAGE\") > 0\r\n      ) {\r\n        this.imageType = 2;\r\n        this.textBase64 = archivoBase64;\r\n      }\r\n    },\r\n    uploadFile() {\r\n      let extension = \"\";\r\n      this.yasubio = true;\r\n      extension = divilib.getValueExtension(\r\n        divilib.CMSMimeToExtension,\r\n        this.DocumentoMimeType\r\n      );\r\n\r\n//alert(\"cocdia \"+this.getCodCia);\r\n      let respuestaCMS = {\r\n        CodCia: this.getCodCia,\r\n        CodigoPeticion: \"14\",\r\n        Repositorio: \"\",\r\n        GuardaArchivo: \"B\",\r\n        RutaOrigen: this.textBase64.substr(\",\"),\r\n        ExtensionFinal: \"\",\r\n        RutaDestino: \"\",\r\n        EntidadCodigo: \"\",\r\n        LlaveExterna: this.LlaveExterna,\r\n        NumNivel: this.NumNivel,\r\n        NumDoc: this.NumDoc,\r\n        ReferenciaPadre: \"\",\r\n        Referencia: this.Referencia,\r\n        hashDoc: \"\",\r\n        ReferenciaPersonalizada: \"\",\r\n        IndicadorAtiendeWs: \"\",\r\n        FormatoImagen: \"\",\r\n        DirectorioCrear: \"\",\r\n        DestinoFisico: \"\",\r\n        DirectorioSeparatorOrigen: \"\",\r\n        InsertarBd: \"\",\r\n        DocumentoMimeType: this.DocumentoMimeType,\r\n        NombreObjeto: this.descripcionDoc,\r\n        Descripcion: this.descripcionDoc,\r\n        Extension: extension,\r\n        NuevoNombre: this.descripcionDoc,\r\n        Thumb: \"\",\r\n        Lote: \"\",\r\n        FormatoArchivoDestino: \"\"\r\n      };\r\n\r\n       \r\n      this.bdCMS[0].Encriptado = \"\";\r\n      this.bdCMS[0].TipoGuardado = \"\";\r\n      this.bdCMS[0].EntidadCodigo = \"\";\r\n      this.bdCMS[0].InformacionBusqueda = \"\";\r\n      this.bdCMS[0].TipoRespuesta = \"\";\r\n      this.bdCMS[0].DirectorioSeparadorOrigen = \"\";\r\n      this.bdCMS[0].GuardarImagenDestino = \"\";\r\n      this.bdCMS[0].Directorio = \"\";\r\n      this.bdCMS[0].IndMultipleEntidad = \"\";\r\n      this.bdCMS[0].Size = \"\";\r\n\r\n      //Peticion Minuscula\r\n\r\n      this.CMSpeticion[0].dml = \"\";\r\n      this.CMSpeticion[0].datos = divilib.dataCMSToXml(respuestaCMS);\r\n      this.CMSpeticion[0].manipula = divilib.manipulaCMSToXml(\r\n        this.ManipulacionCMS[0]\r\n      );\r\n      this.CMSpeticion[0].bd = divilib.bdCMSToXml(this.bdCMS[0]);\r\n      this.CMSpeticion[0].formato = \"N\";\r\n      this.CMSpeticion[0].formatoRequest = \"N\";\r\n      this.CMSpeticion[0].Credencial = this.getProfile.Credencial;\r\n      this.CMSpeticion[0].deserror = \"\";\r\n      this.CMSpeticion[0].codigoerror = \"0\";\r\n\r\n      console.log(\"peticion CMS \", this.CMSpeticion[0]);\r\n\r\n      \r\n      //cambia a acDsoaPrueba // acDsoa\r\n      \r\n      if (this.LlaveExterna > \"0\")\r\n        this.$store.dispatch(\"CMSacDsoa\", this.CMSpeticion[0]);\r\n\r\n      else {\r\n         this.mensajeBd = \"No hay datos correctos para Guardar  llave extrerna no presente \";\r\n      }\r\n      \r\n    }\r\n  },\r\n\r\n  watch: {\r\n    CMSDataRespuesta: function() {\r\n      console.log(\"respuesta CMSDataRespuesta Y se Cargo en watch CMSDataRespuesta \" )\r\n\r\n      if (this.yasubio == true) {\r\n           this.Referencia=this.CMSDataRespuesta.Referencia;\r\n\r\n        if (this.Referencia > \"0\")\r\n          this.mensajeBd =\r\n            \"Documento Indexado correctamente con  Referencia\" +\r\n            this.Referencia;\r\n        else \r\n           this.mensajeBd = \"Problemas para subir Archivo No Obtubo respuesta Correcta\";\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n  /deep/ .vs-sidebar--background {\r\n    z-index: 52010;\r\n  }\r\n\r\n  /deep/ .vs-sidebar {\r\n    z-index: 52010;\r\n    width: 70%;\r\n    max-width: 90vw;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n       "],"sourceRoot":"src/divisoft/uploadFile"}]}