{"remainingRequest":"C:\\Users\\Usuario\\Documents\\VUE\\vuesax_marzo_2020\\vuexy-full-version\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Usuario\\Documents\\VUE\\vuesax_marzo_2020\\vuexy-full-version\\src\\store\\auth\\moduleAuthMutations.js","dependencies":[{"path":"C:\\Users\\Usuario\\Documents\\VUE\\vuesax_marzo_2020\\vuexy-full-version\\src\\store\\auth\\moduleAuthMutations.js","mtime":1587156369144},{"path":"C:\\Users\\Usuario\\Documents\\VUE\\vuesax_marzo_2020\\vuexy-full-version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Usuario\\Documents\\VUE\\vuesax_marzo_2020\\vuexy-full-version\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\n\n/*=========================================================================================\n  File Name: moduleAuthMutations.js\n  Description: Auth Module Mutations\n==========================================================================================*/\nimport CryptoJS from 'crypto-js';\nimport router from '@/router';\nexport default {\n  mutSetRespuestaLogin: function mutSetRespuestaLogin(state, response) {\n    //extrae el error\n    var parser = new DOMParser();\n    var error = parser.parseFromString(response.datos, \"text/xml\").getElementsByTagName(\"PV_ERROR\")[0].childNodes[0].nodeValue;\n\n    if (error == 0) {\n      //extrae datos XMLRESPONSE\n      var strData64 = response.datos.replace(\"<Response><XML_RESPONSE><![CDATA[<Sdt_profile>\", \"\");\n      var posicion = strData64.indexOf(\"</Sdt_profile>\");\n      strData64 = strData64.substring(0, posicion);\n      var strData = JSON.parse(atob(strData64));\n\n      try {\n        state.profile[0] = strData.Sdt_profile; //console.log(\"statepro\",);\n\n        var profileLocal = state.profile[0];\n        var credencial = state.profile[0].Credencial;\n        profileLocal.Credencial = null;\n        state.profile[0] = profileLocal;\n        strData64 = btoa(JSON.stringify(profileLocal));\n        localStorage.setItem('profile', strData64); //se encripta strData\n        //strData64 = aesEncrypt(strData64);\n\n        var key = '82f2ceed4c503896c8a291e560bd4325'; // change to your key\n\n        var iv = 'sinasinasisinaaa'; // change to your iv\n\n        var cipher = CryptoJS.AES.encrypt(credencial, CryptoJS.enc.Utf8.parse(key), {\n          iv: CryptoJS.enc.Utf8.parse(iv),\n          mode: CryptoJS.mode.CBC\n        });\n        strData64 = cipher.toString();\n        localStorage.setItem('paseKey', strData64); //pantalla principal\n\n        router.push(router.currentRoute.query.to || '/');\n      } catch (e) {\n        console.log(\"error\", e);\n      }\n    } else {\n      console.log(\"error de BD\", error);\n    }\n  },\n  mutSetProfile: function mutSetProfile(state, profile) {\n    state.profile[0] = profile;\n    console.log(\" mutSetProfile \", state.profile[0]);\n  },\n  mutsetURL: function mutsetURL(state, indicadorUrl) {\n    //ASIGNA EL URL \n    if (indicadorUrl == \"O\") state.urlDsoa = \"http://201.194.194.84:8998/DsoaService2/dsoa/request\";\n    if (indicadorUrl == \"P\") state.urlDsoa = \"http://192.168.0.28:8989/dsoaPHP/dsoaPHP/dsoa/\";\n  },\n  mutSetPeticiontxt: function mutSetPeticiontxt(state, pettxt) {\n    // empaquete la peticion \n    state.peticion = \"<SOA_Xml>\";\n    state.peticion += pettxt.header;\n    state.peticion += pettxt.parametros;\n    state.peticion += pettxt.filas;\n    state.peticion += \"</SOA_Xml>\";\n  }\n};",{"version":3,"sources":["C:/Users/Usuario/Documents/VUE/vuesax_marzo_2020/vuexy-full-version/src/store/auth/moduleAuthMutations.js"],"names":["CryptoJS","router","mutSetRespuestaLogin","state","response","parser","DOMParser","error","parseFromString","datos","getElementsByTagName","childNodes","nodeValue","strData64","replace","posicion","indexOf","substring","strData","JSON","parse","atob","profile","Sdt_profile","profileLocal","credencial","Credencial","btoa","stringify","localStorage","setItem","key","iv","cipher","AES","encrypt","enc","Utf8","mode","CBC","toString","push","currentRoute","query","to","e","console","log","mutSetProfile","mutsetURL","indicadorUrl","urlDsoa","mutSetPeticiontxt","pettxt","peticion","header","parametros","filas"],"mappings":"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","sourcesContent":["/*=========================================================================================\n  File Name: moduleAuthMutations.js\n  Description: Auth Module Mutations\n==========================================================================================*/\nimport CryptoJS from 'crypto-js'\nimport router from '@/router'\n\nexport default {\n\n  mutSetRespuestaLogin(state, response) {\n    //extrae el error\n    var parser = new DOMParser();\n    var error = parser.parseFromString(response.datos, \"text/xml\").getElementsByTagName(\"PV_ERROR\")[0].childNodes[0].nodeValue;\n\n    if (error == 0) {\n      //extrae datos XMLRESPONSE\n      var strData64 = response.datos.replace(\"<Response><XML_RESPONSE><![CDATA[<Sdt_profile>\", \"\");\n      var posicion = strData64.indexOf(\"</Sdt_profile>\");\n      strData64 = strData64.substring(0, posicion);\n\n      var strData = JSON.parse(atob(strData64));\n\n      try {\n        state.profile[0] = strData.Sdt_profile;\n        //console.log(\"statepro\",);\n        let profileLocal = state.profile[0];\n\n        let credencial = state.profile[0].Credencial;\n              \n        profileLocal.Credencial = null;\n\n        state.profile[0] = profileLocal;\n        \n        strData64 = btoa(JSON.stringify(profileLocal));\n        \n        localStorage.setItem('profile', strData64);\n\n        //se encripta strData\n        //strData64 = aesEncrypt(strData64);\n \n        const key = '82f2ceed4c503896c8a291e560bd4325' // change to your key\n        const iv = 'sinasinasisinaaa' // change to your iv\n\n        const cipher = CryptoJS.AES.encrypt(credencial, CryptoJS.enc.Utf8.parse(key), {\n          iv: CryptoJS.enc.Utf8.parse(iv),\n          mode: CryptoJS.mode.CBC\n        })\n     \n        strData64 = cipher.toString();\n\n        localStorage.setItem('paseKey', strData64);\n\n        //pantalla principal\n        router.push(router.currentRoute.query.to || '/')\n      } catch (e) {\n        console.log(\"error\", e);\n      }\n    } else {\n      console.log(\"error de BD\", error);\n    }\n  },\n\n  mutSetProfile(state, profile) {\n    state.profile[0] = profile;\n    console.log(\" mutSetProfile \", state.profile[0])\n  },\n\n  mutsetURL(state, indicadorUrl) {\n    //ASIGNA EL URL \n    if (indicadorUrl == \"O\")\n        state.urlDsoa = \"http://201.194.194.84:8998/DsoaService2/dsoa/request\";\n\n    if (indicadorUrl == \"P\")\n        state.urlDsoa = \"http://192.168.0.28:8989/dsoaPHP/dsoaPHP/dsoa/\";\n  },\n\n  mutSetPeticiontxt(state, pettxt) {\n\n    // empaquete la peticion \n    state.peticion = \"<SOA_Xml>\";\n    state.peticion += pettxt.header;\n    state.peticion += pettxt.parametros;\n    state.peticion += pettxt.filas;\n    state.peticion += \"</SOA_Xml>\";\n  },\n\n}\n"]}]}