{"remainingRequest":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\divisoft\\uploadFile\\UploadDefault.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\divisoft\\uploadFile\\UploadDefault.vue","mtime":1604601624766},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js","mtime":1604601556483},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\vue-loader\\lib\\index.js","mtime":1604601615297}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n \r\n// lector basico de documentos o imagenes\r\nimport { eventBus } from \"@/main\"; // para que se hablen los componentes\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\n\r\n//componente lee B64\r\nimport file64Reader from \"./file64Reader\";\r\n\r\nimport * as divilib from \"@/divisoftlibs/utilDivisoftJS.js\";\r\n\r\nexport default {\r\n  created() {\r\n    //\t cuando se createReadStream\r\n\r\n    eventBus.$on(\"cargaDocUpload\", respuestaCMSUP => { \r\n      (\r\n        \r\n        this.Referencia = \"0\"), //respuestaCMSUP[0].Referencia;\r\n        (this.LlaveExterna = respuestaCMSUP[0].LlaveExterna);\r\n      this.NumNivel = respuestaCMSUP[0].NumNivel;\r\n      this.NumDoc = respuestaCMSUP[0].NumDoc;\r\n      if    (!(this.LlaveExterna > \"0\"))\r\n           this.mensajeBd = \"Datos Incorrectos para Cargar IMAGEN\";\r\n          \r\n      console.log(\"Cargando Uploda \", respuestaCMSUP);\r\n    });\r\n  },\r\n  beforeDestroy: function() {\r\n    //Crea un bus  OYENTE\r\n    // SI HAY PROMPT\r\n    eventBus.$off(\"cargaDocUpload\");   \r\n  },\r\n\r\n  props: {\r\n    tituloUpload: {\r\n      type: String,\r\n      required: false\r\n    },\r\n    isSidebarActive: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      mensajeBd: \"\",\r\n      activaalerta: true,\r\n      yasubio: false,\r\n\r\n      Referencia: \"0\",\r\n      LlaveExterna: \"\",\r\n      NumNivel: \"\",\r\n      NumDoc: \"\",\r\n\r\n      DocumentoMimeType: \"\",\r\n      DescripcionDoc: \"\",\r\n\r\n      bdCMS: divilib.BdCMS,\r\n      CMSpeticion: divilib.CMSpeticion,\r\n      ManipulacionCMS: divilib.ManipulacionCMS,\r\n      textBase64: \"\",\r\n      textMS: \"\",\r\n      imageType: 0,\r\n      subeArchivo: false,\r\n      editKey: 0\r\n    };\r\n  },\r\n  components: {\r\n    file64Reader,\r\n    VuePerfectScrollbar\r\n  },\r\n  computed: {\r\n    getCodCia() {\r\n      return this.$store.state.CodCia;\r\n    },\r\n    getProfile() {\r\n          return this.$store.state.dsoaLogin.profile[0];\r\n    },\r\n\r\n    CMSDataRespuesta() {\r\n      return this.$store.state.DataCMS;\r\n    },\r\n\r\n    isSidebarActiveLocal: {\r\n      get() {\r\n        return this.isSidebarActive;\r\n      },\r\n      set(val) {\r\n        if (!val) {\r\n          this.$emit(\"closeSidebar\");\r\n          //this.initValues();\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //Metodo para recibir  Los datos del componente\r\n\r\n    EnviaBase64(archivoBase64, datosRespuesta) {\r\n      this.textBase64 = \"\";\r\n\r\n      this.DocumentoMimeType = datosRespuesta[0].DocumentoMimeType;\r\n      this.DescripcionDoc = datosRespuesta[0].descripcionDoc;\r\n      if (this.DescripcionDoc == \"\") this.DescripcionDoc = \"Documento\";\r\n\r\n      if (\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"PDF\") > 0 ||\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"pdf\") > 0\r\n      ) {\r\n        this.imageType = 1;\r\n        this.textBase64 = archivoBase64;\r\n      }\r\n\r\n      if (\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"mage\") > 0 ||\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"MAGE\") > 0\r\n      ) {\r\n        this.imageType = 2;\r\n        this.textBase64 = archivoBase64;\r\n      }\r\n    },\r\n    uploadFile() {\r\n      let extension = \"\";\r\n      this.yasubio = true;\r\n      extension = divilib.getValueExtension(\r\n        divilib.CMSMimeToExtension,\r\n        this.DocumentoMimeType\r\n      );\r\n\r\n//alert(\"cocdia \"+this.getCodCia);\r\n      let respuestaCMS = {\r\n        CodCia: this.getCodCia,\r\n        CodigoPeticion: \"14\",\r\n        Repositorio: \"\",\r\n        GuardaArchivo: \"B\",\r\n        RutaOrigen: this.textBase64.substr(\",\"),\r\n        ExtensionFinal: \"\",\r\n        RutaDestino: \"\",\r\n        EntidadCodigo: \"\",\r\n        LlaveExterna: this.LlaveExterna,\r\n        NumNivel: this.NumNivel,\r\n        NumDoc: this.NumDoc,\r\n        ReferenciaPadre: \"\",\r\n        Referencia: this.Referencia,\r\n        hashDoc: \"\",\r\n        ReferenciaPersonalizada: \"\",\r\n        IndicadorAtiendeWs: \"\",\r\n        FormatoImagen: \"\",\r\n        DirectorioCrear: \"\",\r\n        DestinoFisico: \"\",\r\n        DirectorioSeparatorOrigen: \"\",\r\n        InsertarBd: \"\",\r\n        DocumentoMimeType: this.DocumentoMimeType,\r\n        NombreObjeto: this.descripcionDoc,\r\n        Descripcion: this.descripcionDoc,\r\n        Extension: extension,\r\n        NuevoNombre: this.descripcionDoc,\r\n        Thumb: \"\",\r\n        Lote: \"\",\r\n        FormatoArchivoDestino: \"\"\r\n      };\r\n\r\n       \r\n      this.bdCMS[0].Encriptado = \"\";\r\n      this.bdCMS[0].TipoGuardado = \"\";\r\n      this.bdCMS[0].EntidadCodigo = \"\";\r\n      this.bdCMS[0].InformacionBusqueda = \"\";\r\n      this.bdCMS[0].TipoRespuesta = \"\";\r\n      this.bdCMS[0].DirectorioSeparadorOrigen = \"\";\r\n      this.bdCMS[0].GuardarImagenDestino = \"\";\r\n      this.bdCMS[0].Directorio = \"\";\r\n      this.bdCMS[0].IndMultipleEntidad = \"\";\r\n      this.bdCMS[0].Size = \"\";\r\n\r\n      //Peticion Minuscula\r\n\r\n      this.CMSpeticion[0].dml = \"\";\r\n      this.CMSpeticion[0].datos = divilib.dataCMSToXml(respuestaCMS);\r\n      this.CMSpeticion[0].manipula = divilib.manipulaCMSToXml(\r\n        this.ManipulacionCMS[0]\r\n      );\r\n      this.CMSpeticion[0].bd = divilib.bdCMSToXml(this.bdCMS[0]);\r\n      this.CMSpeticion[0].formato = \"N\";\r\n      this.CMSpeticion[0].formatoRequest = \"N\";\r\n      this.CMSpeticion[0].Credencial = this.getProfile.Credencial;\r\n      this.CMSpeticion[0].deserror = \"\";\r\n      this.CMSpeticion[0].codigoerror = \"0\";\r\n\r\n      console.log(\"peticion CMS \", this.CMSpeticion[0]);\r\n\r\n      \r\n      //cambia a acDsoaPrueba // acDsoa\r\n      \r\n      if (this.LlaveExterna > \"0\")\r\n        this.$store.dispatch(\"CMSacDsoa\", this.CMSpeticion[0]);\r\n\r\n      else {\r\n         this.mensajeBd = \"No hay datos correctos para Guardar  llave extrerna no presente \";\r\n      }\r\n      \r\n    }\r\n  },\r\n\r\n  watch: {\r\n    CMSDataRespuesta: function() {\r\n      console.log(\"respuesta CMSDataRespuesta Y se Cargo en watch CMSDataRespuesta \" )\r\n\r\n      if (this.yasubio == true) {\r\n           this.Referencia=this.CMSDataRespuesta.Referencia;\r\n\r\n        if (this.Referencia > \"0\")\r\n          this.mensajeBd =\r\n            \"Documento Indexado correctamente con  Referencia\" +\r\n            this.Referencia;\r\n        else \r\n           this.mensajeBd = \"Problemas para subir Archivo No Obtubo respuesta Correcta\";\r\n      }\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["UploadDefault.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UploadDefault.vue","sourceRoot":"src/divisoft/uploadFile","sourcesContent":["  <!-- =========================================================================================\r\n  File Name: AddNewDataSidebar.vue\r\n  Description: Add New Data - Sidebar component\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuesax Admin - VueJS Dashboard Admin Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n========================================================================================== -->\r\n \r\n\r\n<template>\r\n  <div id=\"data-list-list-view\" class=\"vx-col md:w-1/2 w-full mb-base\">\r\n    <vs-sidebar\r\n      click-not-close\r\n      position-right\r\n      parent=\"body\"\r\n      default-index=\"1\"\r\n      color=\"primary\"\r\n      class=\"add-new-data-sidebar items-no-padding\"\r\n      spacer\r\n      v-model=\"isSidebarActiveLocal\"\r\n    >\r\n      <div class=\"mt-6 flex items-center justify-between px-6\">\r\n        <h4>{{tituloUpload}}</h4>\r\n        <feather-icon\r\n          icon=\"XIcon\"\r\n          @click.stop=\"isSidebarActiveLocal = false\"\r\n          class=\"cursor-pointer\"\r\n        ></feather-icon>\r\n      </div>\r\n\r\n      <vx-card title=\"Mensaje Base Datos\" code-toggler>{{mensajeBd}}</vx-card>\r\n\r\n      <vs-divider class=\"mb-0\"></vs-divider>\r\n      <VuePerfectScrollbar class=\"scroll-area--data-list-add-new pt-4 pb-6\">\r\n        <div class=\"p-6\">\r\n          <br />\r\n          <iframe v-show=\"imageType==1\" :src=\"textBase64\" type=\"application/pdf\"></iframe>\r\n          <div>\r\n            <img\r\n              v-show=\"imageType==2\"\r\n              style=\"display:block; width:100px;height:100px;\"\r\n              id=\"base64image\"\r\n              :src=\"textBase64\"\r\n            />\r\n          </div>\r\n\r\n          <file64Reader @EnviaBase64=\"EnviaBase64\"></file64Reader>\r\n<br>\r\n          <button type=\"submit\" class=\"btn btn-success\" @click=\"uploadFile()\">Subir a BD</button>\r\n        </div>\r\n      </VuePerfectScrollbar>\r\n    </vs-sidebar>\r\n  </div>\r\n</template> \r\n\r\n<script> \r\n// lector basico de documentos o imagenes\r\nimport { eventBus } from \"@/main\"; // para que se hablen los componentes\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\n\r\n//componente lee B64\r\nimport file64Reader from \"./file64Reader\";\r\n\r\nimport * as divilib from \"@/divisoftlibs/utilDivisoftJS.js\";\r\n\r\nexport default {\r\n  created() {\r\n    //\t cuando se createReadStream\r\n\r\n    eventBus.$on(\"cargaDocUpload\", respuestaCMSUP => { \r\n      (\r\n        \r\n        this.Referencia = \"0\"), //respuestaCMSUP[0].Referencia;\r\n        (this.LlaveExterna = respuestaCMSUP[0].LlaveExterna);\r\n      this.NumNivel = respuestaCMSUP[0].NumNivel;\r\n      this.NumDoc = respuestaCMSUP[0].NumDoc;\r\n      if    (!(this.LlaveExterna > \"0\"))\r\n           this.mensajeBd = \"Datos Incorrectos para Cargar IMAGEN\";\r\n          \r\n      console.log(\"Cargando Uploda \", respuestaCMSUP);\r\n    });\r\n  },\r\n  beforeDestroy: function() {\r\n    //Crea un bus  OYENTE\r\n    // SI HAY PROMPT\r\n    eventBus.$off(\"cargaDocUpload\");   \r\n  },\r\n\r\n  props: {\r\n    tituloUpload: {\r\n      type: String,\r\n      required: false\r\n    },\r\n    isSidebarActive: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      mensajeBd: \"\",\r\n      activaalerta: true,\r\n      yasubio: false,\r\n\r\n      Referencia: \"0\",\r\n      LlaveExterna: \"\",\r\n      NumNivel: \"\",\r\n      NumDoc: \"\",\r\n\r\n      DocumentoMimeType: \"\",\r\n      DescripcionDoc: \"\",\r\n\r\n      bdCMS: divilib.BdCMS,\r\n      CMSpeticion: divilib.CMSpeticion,\r\n      ManipulacionCMS: divilib.ManipulacionCMS,\r\n      textBase64: \"\",\r\n      textMS: \"\",\r\n      imageType: 0,\r\n      subeArchivo: false,\r\n      editKey: 0\r\n    };\r\n  },\r\n  components: {\r\n    file64Reader,\r\n    VuePerfectScrollbar\r\n  },\r\n  computed: {\r\n    getCodCia() {\r\n      return this.$store.state.CodCia;\r\n    },\r\n    getProfile() {\r\n          return this.$store.state.dsoaLogin.profile[0];\r\n    },\r\n\r\n    CMSDataRespuesta() {\r\n      return this.$store.state.DataCMS;\r\n    },\r\n\r\n    isSidebarActiveLocal: {\r\n      get() {\r\n        return this.isSidebarActive;\r\n      },\r\n      set(val) {\r\n        if (!val) {\r\n          this.$emit(\"closeSidebar\");\r\n          //this.initValues();\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //Metodo para recibir  Los datos del componente\r\n\r\n    EnviaBase64(archivoBase64, datosRespuesta) {\r\n      this.textBase64 = \"\";\r\n\r\n      this.DocumentoMimeType = datosRespuesta[0].DocumentoMimeType;\r\n      this.DescripcionDoc = datosRespuesta[0].descripcionDoc;\r\n      if (this.DescripcionDoc == \"\") this.DescripcionDoc = \"Documento\";\r\n\r\n      if (\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"PDF\") > 0 ||\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"pdf\") > 0\r\n      ) {\r\n        this.imageType = 1;\r\n        this.textBase64 = archivoBase64;\r\n      }\r\n\r\n      if (\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"mage\") > 0 ||\r\n        datosRespuesta[0].DocumentoMimeType.indexOf(\"MAGE\") > 0\r\n      ) {\r\n        this.imageType = 2;\r\n        this.textBase64 = archivoBase64;\r\n      }\r\n    },\r\n    uploadFile() {\r\n      let extension = \"\";\r\n      this.yasubio = true;\r\n      extension = divilib.getValueExtension(\r\n        divilib.CMSMimeToExtension,\r\n        this.DocumentoMimeType\r\n      );\r\n\r\n//alert(\"cocdia \"+this.getCodCia);\r\n      let respuestaCMS = {\r\n        CodCia: this.getCodCia,\r\n        CodigoPeticion: \"14\",\r\n        Repositorio: \"\",\r\n        GuardaArchivo: \"B\",\r\n        RutaOrigen: this.textBase64.substr(\",\"),\r\n        ExtensionFinal: \"\",\r\n        RutaDestino: \"\",\r\n        EntidadCodigo: \"\",\r\n        LlaveExterna: this.LlaveExterna,\r\n        NumNivel: this.NumNivel,\r\n        NumDoc: this.NumDoc,\r\n        ReferenciaPadre: \"\",\r\n        Referencia: this.Referencia,\r\n        hashDoc: \"\",\r\n        ReferenciaPersonalizada: \"\",\r\n        IndicadorAtiendeWs: \"\",\r\n        FormatoImagen: \"\",\r\n        DirectorioCrear: \"\",\r\n        DestinoFisico: \"\",\r\n        DirectorioSeparatorOrigen: \"\",\r\n        InsertarBd: \"\",\r\n        DocumentoMimeType: this.DocumentoMimeType,\r\n        NombreObjeto: this.descripcionDoc,\r\n        Descripcion: this.descripcionDoc,\r\n        Extension: extension,\r\n        NuevoNombre: this.descripcionDoc,\r\n        Thumb: \"\",\r\n        Lote: \"\",\r\n        FormatoArchivoDestino: \"\"\r\n      };\r\n\r\n       \r\n      this.bdCMS[0].Encriptado = \"\";\r\n      this.bdCMS[0].TipoGuardado = \"\";\r\n      this.bdCMS[0].EntidadCodigo = \"\";\r\n      this.bdCMS[0].InformacionBusqueda = \"\";\r\n      this.bdCMS[0].TipoRespuesta = \"\";\r\n      this.bdCMS[0].DirectorioSeparadorOrigen = \"\";\r\n      this.bdCMS[0].GuardarImagenDestino = \"\";\r\n      this.bdCMS[0].Directorio = \"\";\r\n      this.bdCMS[0].IndMultipleEntidad = \"\";\r\n      this.bdCMS[0].Size = \"\";\r\n\r\n      //Peticion Minuscula\r\n\r\n      this.CMSpeticion[0].dml = \"\";\r\n      this.CMSpeticion[0].datos = divilib.dataCMSToXml(respuestaCMS);\r\n      this.CMSpeticion[0].manipula = divilib.manipulaCMSToXml(\r\n        this.ManipulacionCMS[0]\r\n      );\r\n      this.CMSpeticion[0].bd = divilib.bdCMSToXml(this.bdCMS[0]);\r\n      this.CMSpeticion[0].formato = \"N\";\r\n      this.CMSpeticion[0].formatoRequest = \"N\";\r\n      this.CMSpeticion[0].Credencial = this.getProfile.Credencial;\r\n      this.CMSpeticion[0].deserror = \"\";\r\n      this.CMSpeticion[0].codigoerror = \"0\";\r\n\r\n      console.log(\"peticion CMS \", this.CMSpeticion[0]);\r\n\r\n      \r\n      //cambia a acDsoaPrueba // acDsoa\r\n      \r\n      if (this.LlaveExterna > \"0\")\r\n        this.$store.dispatch(\"CMSacDsoa\", this.CMSpeticion[0]);\r\n\r\n      else {\r\n         this.mensajeBd = \"No hay datos correctos para Guardar  llave extrerna no presente \";\r\n      }\r\n      \r\n    }\r\n  },\r\n\r\n  watch: {\r\n    CMSDataRespuesta: function() {\r\n      console.log(\"respuesta CMSDataRespuesta Y se Cargo en watch CMSDataRespuesta \" )\r\n\r\n      if (this.yasubio == true) {\r\n           this.Referencia=this.CMSDataRespuesta.Referencia;\r\n\r\n        if (this.Referencia > \"0\")\r\n          this.mensajeBd =\r\n            \"Documento Indexado correctamente con  Referencia\" +\r\n            this.Referencia;\r\n        else \r\n           this.mensajeBd = \"Problemas para subir Archivo No Obtubo respuesta Correcta\";\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n  /deep/ .vs-sidebar--background {\r\n    z-index: 52010;\r\n  }\r\n\r\n  /deep/ .vs-sidebar {\r\n    z-index: 52010;\r\n    width: 70%;\r\n    max-width: 90vw;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n       "]}]}