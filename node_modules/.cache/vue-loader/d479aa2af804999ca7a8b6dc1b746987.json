{"remainingRequest":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\views\\pages\\login\\LoginDsoa.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\src\\views\\pages\\login\\LoginDsoa.vue","mtime":1604601625403},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\babel-loader\\lib\\index.js","mtime":1604601556483},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604601561321},{"path":"C:\\Users\\Renan Galvan\\Desktop\\sincronizados_git\\tavo_nov_2020\\tavo\\node_modules\\vue-loader\\lib\\index.js","mtime":1604601615297}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport * as divilib from \"@/divisoftlibs/utilDivisoftJS.js\";\r\nimport router from \"@/router\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      action: \"L\",\r\n      username: \"\",\r\n      password: \"\", // en B64  RrQK8n/T0OM=\r\n      checkbox_remember_me: false,\r\n      paramtxt: \"\",\r\n      headertxt: \"\",\r\n      AlertColor: \"primary\",\r\n      mensajeLogin: \"\",\r\n    };\r\n  },\r\n\r\n  created() {\r\n    //BUSCA IP\r\n\r\n    this.$store.commit(\"dsoaLogin/MUTSETENCRIPTA\", \"\");\r\n    this.$store.dispatch(\"dsoaLogin/acLoginGetip\");\r\n  },\r\n\r\n  watch: {\r\n    getEncripta: function () {\r\n      if (this.getEncripta.length > 5)\r\n        this.inicioSesion(this.action, this.getEncripta);\r\n    },\r\n\r\n    getProfile: function () {\r\n      if (this.getProfile.Celular > \"0\")\r\n        router.push(\"/pages/forgot-password\").catch(() => {});\r\n      else\r\n        this.$vs.notify({\r\n          title: \"GoP informa\",\r\n\r\n          text: \"Usuario No Existe o no Tiene Celular registrado \",\r\n          iconPack: \"feather\",\r\n          icon: \"icon-alert-circle\",\r\n          color: \"warning\",\r\n        });\r\n    },\r\n\r\n    // SI HAY PROMPT\r\n    getErrorLogin: function () {\r\n      if (this.getErrorLogin != \"0\")\r\n        if (this.getErrorLogin == \"1002\") {\r\n          this.mensajeLogin =\r\n            \"Hay un proceso de Recuperacion de Clave Iniciado, Debe de Concluirlo \";\r\n\r\n          this.$vs.notify({\r\n            title: \"GoP informa\",\r\n            text:\r\n              \"Hay un proceso de Recuperacion de Clave Iniciado, Debe de Concluirlo \",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-circle\",\r\n            color: \"warning\",\r\n          });\r\n        } else {\r\n          this.$vs.notify({\r\n            title: \"GoP informa\",\r\n\r\n            text: \"Se ha producido un error en Login \",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-circle\",\r\n            color: \"warning\",\r\n          });\r\n        }\r\n    },\r\n  },\r\n  computed: {\r\n    inputValid() {\r\n      if (this.getErrorLogin > \"0\") {\r\n        this.AlertColor = \"danger\";\r\n\r\n        if (this.getErrorLogin == \"1002\")\r\n          this.mensajeLogin =\r\n            \"Hay un proceso de Recuperacion de Clave Iniciado, Debe de Concluirlo \";\r\n        else this.mensajeLogin = \"Error en el Ingreso Credenciales Invalidas\";\r\n\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    getRuta() {\r\n      return process.env.VUE_APP_ENCRIPTA;\r\n    },\r\n    // recupera el profile\r\n    getProfile() {\r\n      return this.$store.state.profile;\r\n    },\r\n    // escucha si el login  respondio error\r\n    getErrorLogin() {\r\n      return this.$store.state.dsoaLogin.errorProfile;\r\n    },\r\n\r\n    validateForm() {\r\n      return !this.errors.any() && this.email !== \"\" && this.password !== \"\";\r\n    },\r\n    validateUsername() {\r\n      return !this.errors.any() && this.email !== \"\";\r\n    },\r\n    getPublicIp() {\r\n      return this.$store.state.dsoaLogin.myPublicIP;\r\n    },\r\n    getEncripta() {\r\n      return this.$store.state.dsoaLogin.respuestaEncriptado;\r\n    },\r\n  },\r\n  methods: {\r\n    inicioSesionPrevia: function (indicadorTipoLogin) {\r\n      this.action = indicadorTipoLogin;\r\n      this.$store.dispatch(\"dsoaLogin/acLoginEncripta\", this.password);\r\n    },\r\n    onchangeConsiguePass() {\r\n      //GO_SHOPMARCA\r\n      // this.$store.dispatch(\"dsoaLogin/acLoginEncripta\", this.password);\r\n    }, // METODO busca clave\r\n\r\n    //función para iniciar sesión\r\n    inicioSesion: function (indicadorTipoLogin, clave) {\r\n      var origenUrl = \"O\";\r\n\r\n      var header = {\r\n        MODO: \"E\",\r\n        OBJECTID: \"97\",\r\n        CREDENCIAL: \"REPLACECREDENCIAL\",\r\n        USERNAME: this.username,\r\n        REGISTROSXPAGINA: \"\",\r\n        PAGINA: \"\",\r\n        ORDERBY: \"\",\r\n      };\r\n\r\n      //crea SdtLogin\r\n      var SdtLogin = {\r\n        action: indicadorTipoLogin,\r\n        username: this.username,\r\n        password: clave,\r\n        direccionIP: this.getPublicIp,\r\n        conexionADM: \"security\",\r\n        credencial: \"REPLACECREDENCIAL\",\r\n        celular: \"\",\r\n        email: \"\",\r\n        nombre: \"\",\r\n        empresa: \"100003\",\r\n        passwordOld: \"\",\r\n        keySecurity: \"\",\r\n      };\r\n      if (clave.length < 5) {\r\n        this.$vs.notify({\r\n          title: \"Login\",\r\n          text: \"Clave no Correcta\",\r\n          iconPack: \"feather\",\r\n          icon: \"icon-alert-circle\",\r\n          color: \"warning\",\r\n        });\r\n\r\n        return false;\r\n      }\r\n\r\n      var loginR = divilib.GetSdtLoginString(SdtLogin);\r\n\r\n      //crea parametros\r\n      var parametros = [];\r\n      var parametro1 = {\r\n        NOMBRE: \"XML_SOLICITUD\",\r\n        OPERADOR: \"=\",\r\n        VALOR1: loginR,\r\n        VALOR2: \"\",\r\n        CDATA: \"1\",\r\n      };\r\n      parametros.push(parametro1);\r\n\r\n      //entrega arreglo de parametros recibe texto de parametros\r\n      this.paramtxt = divilib.paramArraytoStrintg(parametros);\r\n      this.headertxt = divilib.GetHeaderString(header);\r\n\r\n      //Crea peticion\r\n      var petTxt = {\r\n        header: this.headertxt,\r\n        parametros: this.paramtxt,\r\n        filas: \"\",\r\n      };\r\n\r\n      this.$store.commit(\"dsoaLogin/MUTSETURL\", \"O\");\r\n      this.$store.commit(\"dsoaLogin/MUTSETPETICIONTXT\", petTxt);\r\n\r\n      //agregar usuario a la hora\r\n      var horaNumerico = Date.now();\r\n      console.log(\"The time elapsed in millisecond is: \" + horaNumerico);\r\n\r\n      //Crea pedido\r\n      var pedido = {\r\n        dml: \"E\",\r\n        ObjectId: \"97\",\r\n        credencial: horaNumerico,\r\n        formatoenvio: \"N\",\r\n        formatorecibe: \"N\",\r\n        indicador: \"6\", //LOGIN\r\n        origenUrl: origenUrl,\r\n        tipoLogin: indicadorTipoLogin,\r\n      };\r\n      //llama action\r\n\r\n      this.$store.commit(\"dsoaLogin/MUTSETENCRIPTA\", \"\");\r\n      this.$store.dispatch(\"dsoaLogin/acLoginDsoa\", pedido);\r\n    },\r\n\r\n    checkLogin() {\r\n      // If user is already logged in notify\r\n      if (this.$store.state.dsoaLogin.isUserLoggedIn()) {\r\n        // Close animation if passed as payload\r\n        // this.$vs.loading.close()\r\n\r\n        this.$vs.notify({\r\n          title: \"Login Attempt\",\r\n          text: \"You are already logged in!\",\r\n          iconPack: \"feather\",\r\n          icon: \"icon-alert-circle\",\r\n          color: \"warning\",\r\n        });\r\n\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n\r\n    registerUser() {\r\n      this.$router.push(\"/pages/register\").catch(() => {});\r\n    },\r\n  },\r\n};\r\n",{"version":3,"sources":["LoginDsoa.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"LoginDsoa.vue","sourceRoot":"src/views/pages/login","sourcesContent":["<!-- =========================================================================================\r\n    File Name: LoginDsoa.vue\r\n    Description: Login Dsoa\r\n    ----------------------------------------------------------------------------------------\r\n========================================================================================== -->\r\n\r\n<template>\r\n  <div >\r\n    \r\n\r\n    <vs-alert :active=\"inputValid\" :color=\"AlertColor\" class=\"text-dark mt-5\">\r\n      {{ mensajeLogin }}\r\n    </vs-alert>\r\n    <br>\r\n\r\n    <vs-input\r\n      v-validate=\"'required|min:1'\"\r\n      data-vv-validate-on=\"blur\"\r\n      name=\"email\"\r\n      icon-no-border\r\n      icon=\"icon icon-user\"\r\n      icon-pack=\"feather\"\r\n      label-placeholder=\"Usuario\"\r\n      v-model=\"username\"\r\n      class=\"w-full\"\r\n    />\r\n    <span class=\"text-danger text-sm\">{{ errors.first(\"email\") }}</span>\r\n    <br />\r\n    <vs-input\r\n      data-vv-validate-on=\"blur\"\r\n      v-validate=\"'required|min:1|max:15'\"\r\n      type=\"password\"\r\n      name=\"password\"\r\n      icon-no-border\r\n      icon=\"icon icon-lock\"\r\n      icon-pack=\"feather\"\r\n      label-placeholder=\"Contraseña\"\r\n      v-model=\"password\"\r\n      class=\"w-full mt-6\"\r\n      v-on:change=\"onchangeConsiguePass\"\r\n    />\r\n    <span class=\"text-danger text-sm\">{{ errors.first(\"password\") }}</span>\r\n\r\n    <div class=\"flex flex-wrap justify-between my-5\">\r\n      <vs-button\r\n        v-show=\"username\"\r\n        :disabled=\"!validateUsername\"\r\n        @click=\"inicioSesion('U')\"\r\n        color=\"rgb(11, 189, 135)\"\r\n        type=\"flat\"\r\n        >Olvidó su Contraseña</vs-button\r\n      >\r\n    </div>\r\n\r\n    <div class=\"flex flex-wrap justify-between mb-3\">\r\n      <vs-button type=\"border\" @click=\"registerUser\">Registrarse</vs-button>\r\n      <vs-button :disabled=\"!validateForm\" @click=\"inicioSesionPrevia('L')\"\r\n        >Ingresar</vs-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as divilib from \"@/divisoftlibs/utilDivisoftJS.js\";\r\nimport router from \"@/router\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      action: \"L\",\r\n      username: \"\",\r\n      password: \"\", // en B64  RrQK8n/T0OM=\r\n      checkbox_remember_me: false,\r\n      paramtxt: \"\",\r\n      headertxt: \"\",\r\n      AlertColor: \"primary\",\r\n      mensajeLogin: \"\",\r\n    };\r\n  },\r\n\r\n  created() {\r\n    //BUSCA IP\r\n\r\n    this.$store.commit(\"dsoaLogin/MUTSETENCRIPTA\", \"\");\r\n    this.$store.dispatch(\"dsoaLogin/acLoginGetip\");\r\n  },\r\n\r\n  watch: {\r\n    getEncripta: function () {\r\n      if (this.getEncripta.length > 5)\r\n        this.inicioSesion(this.action, this.getEncripta);\r\n    },\r\n\r\n    getProfile: function () {\r\n      if (this.getProfile.Celular > \"0\")\r\n        router.push(\"/pages/forgot-password\").catch(() => {});\r\n      else\r\n        this.$vs.notify({\r\n          title: \"GoP informa\",\r\n\r\n          text: \"Usuario No Existe o no Tiene Celular registrado \",\r\n          iconPack: \"feather\",\r\n          icon: \"icon-alert-circle\",\r\n          color: \"warning\",\r\n        });\r\n    },\r\n\r\n    // SI HAY PROMPT\r\n    getErrorLogin: function () {\r\n      if (this.getErrorLogin != \"0\")\r\n        if (this.getErrorLogin == \"1002\") {\r\n          this.mensajeLogin =\r\n            \"Hay un proceso de Recuperacion de Clave Iniciado, Debe de Concluirlo \";\r\n\r\n          this.$vs.notify({\r\n            title: \"GoP informa\",\r\n            text:\r\n              \"Hay un proceso de Recuperacion de Clave Iniciado, Debe de Concluirlo \",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-circle\",\r\n            color: \"warning\",\r\n          });\r\n        } else {\r\n          this.$vs.notify({\r\n            title: \"GoP informa\",\r\n\r\n            text: \"Se ha producido un error en Login \",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-circle\",\r\n            color: \"warning\",\r\n          });\r\n        }\r\n    },\r\n  },\r\n  computed: {\r\n    inputValid() {\r\n      if (this.getErrorLogin > \"0\") {\r\n        this.AlertColor = \"danger\";\r\n\r\n        if (this.getErrorLogin == \"1002\")\r\n          this.mensajeLogin =\r\n            \"Hay un proceso de Recuperacion de Clave Iniciado, Debe de Concluirlo \";\r\n        else this.mensajeLogin = \"Error en el Ingreso Credenciales Invalidas\";\r\n\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    getRuta() {\r\n      return process.env.VUE_APP_ENCRIPTA;\r\n    },\r\n    // recupera el profile\r\n    getProfile() {\r\n      return this.$store.state.profile;\r\n    },\r\n    // escucha si el login  respondio error\r\n    getErrorLogin() {\r\n      return this.$store.state.dsoaLogin.errorProfile;\r\n    },\r\n\r\n    validateForm() {\r\n      return !this.errors.any() && this.email !== \"\" && this.password !== \"\";\r\n    },\r\n    validateUsername() {\r\n      return !this.errors.any() && this.email !== \"\";\r\n    },\r\n    getPublicIp() {\r\n      return this.$store.state.dsoaLogin.myPublicIP;\r\n    },\r\n    getEncripta() {\r\n      return this.$store.state.dsoaLogin.respuestaEncriptado;\r\n    },\r\n  },\r\n  methods: {\r\n    inicioSesionPrevia: function (indicadorTipoLogin) {\r\n      this.action = indicadorTipoLogin;\r\n      this.$store.dispatch(\"dsoaLogin/acLoginEncripta\", this.password);\r\n    },\r\n    onchangeConsiguePass() {\r\n      //GO_SHOPMARCA\r\n      // this.$store.dispatch(\"dsoaLogin/acLoginEncripta\", this.password);\r\n    }, // METODO busca clave\r\n\r\n    //función para iniciar sesión\r\n    inicioSesion: function (indicadorTipoLogin, clave) {\r\n      var origenUrl = \"O\";\r\n\r\n      var header = {\r\n        MODO: \"E\",\r\n        OBJECTID: \"97\",\r\n        CREDENCIAL: \"REPLACECREDENCIAL\",\r\n        USERNAME: this.username,\r\n        REGISTROSXPAGINA: \"\",\r\n        PAGINA: \"\",\r\n        ORDERBY: \"\",\r\n      };\r\n\r\n      //crea SdtLogin\r\n      var SdtLogin = {\r\n        action: indicadorTipoLogin,\r\n        username: this.username,\r\n        password: clave,\r\n        direccionIP: this.getPublicIp,\r\n        conexionADM: \"security\",\r\n        credencial: \"REPLACECREDENCIAL\",\r\n        celular: \"\",\r\n        email: \"\",\r\n        nombre: \"\",\r\n        empresa: \"100003\",\r\n        passwordOld: \"\",\r\n        keySecurity: \"\",\r\n      };\r\n      if (clave.length < 5) {\r\n        this.$vs.notify({\r\n          title: \"Login\",\r\n          text: \"Clave no Correcta\",\r\n          iconPack: \"feather\",\r\n          icon: \"icon-alert-circle\",\r\n          color: \"warning\",\r\n        });\r\n\r\n        return false;\r\n      }\r\n\r\n      var loginR = divilib.GetSdtLoginString(SdtLogin);\r\n\r\n      //crea parametros\r\n      var parametros = [];\r\n      var parametro1 = {\r\n        NOMBRE: \"XML_SOLICITUD\",\r\n        OPERADOR: \"=\",\r\n        VALOR1: loginR,\r\n        VALOR2: \"\",\r\n        CDATA: \"1\",\r\n      };\r\n      parametros.push(parametro1);\r\n\r\n      //entrega arreglo de parametros recibe texto de parametros\r\n      this.paramtxt = divilib.paramArraytoStrintg(parametros);\r\n      this.headertxt = divilib.GetHeaderString(header);\r\n\r\n      //Crea peticion\r\n      var petTxt = {\r\n        header: this.headertxt,\r\n        parametros: this.paramtxt,\r\n        filas: \"\",\r\n      };\r\n\r\n      this.$store.commit(\"dsoaLogin/MUTSETURL\", \"O\");\r\n      this.$store.commit(\"dsoaLogin/MUTSETPETICIONTXT\", petTxt);\r\n\r\n      //agregar usuario a la hora\r\n      var horaNumerico = Date.now();\r\n      console.log(\"The time elapsed in millisecond is: \" + horaNumerico);\r\n\r\n      //Crea pedido\r\n      var pedido = {\r\n        dml: \"E\",\r\n        ObjectId: \"97\",\r\n        credencial: horaNumerico,\r\n        formatoenvio: \"N\",\r\n        formatorecibe: \"N\",\r\n        indicador: \"6\", //LOGIN\r\n        origenUrl: origenUrl,\r\n        tipoLogin: indicadorTipoLogin,\r\n      };\r\n      //llama action\r\n\r\n      this.$store.commit(\"dsoaLogin/MUTSETENCRIPTA\", \"\");\r\n      this.$store.dispatch(\"dsoaLogin/acLoginDsoa\", pedido);\r\n    },\r\n\r\n    checkLogin() {\r\n      // If user is already logged in notify\r\n      if (this.$store.state.dsoaLogin.isUserLoggedIn()) {\r\n        // Close animation if passed as payload\r\n        // this.$vs.loading.close()\r\n\r\n        this.$vs.notify({\r\n          title: \"Login Attempt\",\r\n          text: \"You are already logged in!\",\r\n          iconPack: \"feather\",\r\n          icon: \"icon-alert-circle\",\r\n          color: \"warning\",\r\n        });\r\n\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n\r\n    registerUser() {\r\n      this.$router.push(\"/pages/register\").catch(() => {});\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.disabled {\r\n  pointer-events: none;\r\n  opacity: 0.6;\r\n}\r\n\r\n</style>\r\n"]}]}